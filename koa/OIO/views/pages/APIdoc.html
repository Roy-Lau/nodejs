<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge，chrome=1" />
    <title>号外号-接口文档</title>
    <link rel="stylesheet" type="text/css" href="../assets/style/index.css" />
    <link
      rel="stylesheet"
      type="text/css"
      href="../assets/style/apidoc-style.css"
    />
  </head>

  <body>
    <nav id="nav">
      <div class="items">
        <img src="../assets/images/logo.gif" width="60" height="60" />
        <div class="title-item">
          <h2><a href="../index.html">号 外 号</a></h2>
        </div>
        <div class="tab-item">
          <a href="../index.html">首页</a>
        </div>
        <div class="tab-item" id="product_item">
          <a href="product/voiceClass/Corporate-nickname.html">产品</a>
        </div>
        <div class="tab-item">
          <a href="price.html">价格</a>
        </div>
        <div class="tab-item">
          <a href="experience.html">体验</a>
        </div>
        <div class="tab-item">
          <a href="APIdoc.html">开发文档</a>
        </div>
        <div class="tab-item">
          <a href="help.html">帮助</a>
        </div>
        <div class="right-item">
          <a class="register" href="http://101.201.101.70:8080/ucrm/">登陆</a>
        </div>
        <div class="right-item">
          <a
            class="login"
            href="http://101.201.101.70:8080/ucrm/register_toRegister.action"
            >注册</a
          >
        </div>
      </div>
    </nav>
    <section class="container">
      <div class="api-title-line">
        <ul>
          <li>
            <a
              name="#ACI"
              data-id="#ACI-communication-model"
              href="javascript:void(0);"
              >ACI接口协议</a
            >
          </li>
          <li>
            <a
              name="#ussdInterface"
              data-id="#Interface-profile"
              href="javascript:void(0);"
              >USSD接口文档说明</a
            >
          </li>
          <li>
            <a
              name="#ussdMass"
              data-id="#ussdMass-Interface-profile"
              href="javascript:void(0);"
              >USSD群发接口文档说明</a
            >
          </li>
          <li>
            <a
              name="#smsInterface"
              data-id="#smsInterface-Interface-profile"
              href="javascript:void(0);"
              >短信接口说明</a
            >
          </li>
          <li>
            <a
              name="#smsVerification"
              data-id="#smsVerification-Protocol-specification"
              href="javascript:void(0);"
              >短信验证接口说明</a
            >
          </li>
        </ul>
      </div>
      <section class="api-left">
        <div>
          <ul class="api-items">
            <div id="ACI">
              <li>ACI接口协议</li>
              <ol class="ACI-items">
                <li>
                  <a name="#ACI-communication-model" href="javascript:void(0);"
                    >通信模型</a
                  >
                </li>
                <li>
                  <a name="#ACI-message-format" href="javascript:void(0);"
                    >消息格式</a
                  >
                </li>
                <li>
                  <a name="#ACI-Business-interaction" href="javascript:void(0);"
                    >业务交互阶段</a
                  >
                </li>
                <li>
                  <a name="#ACI-Return-definition" href="javascript:void(0);"
                    >返回码定义</a
                  >
                </li>
                <li>
                  <a name="#ACI-attach" href="javascript:void(0);"
                    >附：签名算法</a
                  >
                </li>
              </ol>
            </div>
            <div id="ussdInterface">
              <li>USSD接口文档说明</li>
              <ol class="ussdInterface-items">
                <li>
                  <a name="#Interface-profile" href="javascript:void(0);"
                    >接口简介</a
                  >
                </li>
                <li>
                  <a name="#Single-ussd-delivery" href="javascript:void(0);"
                    >单条USSD投递</a
                  >
                </li>
                <li>
                  <a
                    name="#USSD-Delivery-Status-Notification"
                    href="javascript:void(0);"
                    >USSD投递状态通知</a
                  >
                </li>
              </ol>
            </div>
            <div id="ussdMass">
              <li>USSD群发接口文档说明</li>
              <ol class="ussdMass-items">
                <li>
                  <a
                    name="#ussdMass-Interface-profile"
                    href="javascript:void(0);"
                    >使用说明</a
                  >
                </li>
                <li>
                  <a
                    name="#ussdMass-Create-batch-tasks"
                    href="javascript:void(0);"
                    >创建批量群发任务</a
                  >
                </li>
                <li>
                  <a name="#ussdMass-Upload-number" href="javascript:void(0);"
                    >上传群发号码</a
                  >
                </li>
              </ol>
            </div>
            <div id="smsInterface">
              <li>短信接口说明</li>
              <ol class="smsInterface-items">
                <li>
                  <a
                    name="#smsInterface-Interface-profile"
                    href="javascript:void(0);"
                    >协议说明</a
                  >
                </li>
                <li>
                  <a
                    name="#smsInterface-SMS-verification-code-interface"
                    href="javascript:void(0);"
                    >获取短信验证码</a
                  >
                </li>
                <li>
                  <a
                    name="#smsInterface-check-SMS-verification-code-interface"
                    href="javascript:void(0);"
                    >校验短信验证码</a
                  >
                </li>
                <li>
                  <a
                    name="#smsInterface-Ordinary-SMS"
                    href="javascript:void(0);"
                    >普通短信</a
                  >
                </li>
                <li>
                  <a
                    name="#smsInterface-Query-balance-interface"
                    href="javascript:void(0);"
                    >查询余额接口</a
                  >
                </li>
                <li>
                  <a
                    name="#smsInterface-SMS-status-report"
                    href="javascript:void(0);"
                    >短信状态report</a
                  >
                </li>
                <li>
                  <a
                    name="#smsInterface-SMS-status-query"
                    href="javascript:void(0);"
                    >短信状态查询</a
                  >
                </li>
                <li>
                  <a
                    name="#smsInterface-SMS-Deliver-push"
                    href="javascript:void(0);"
                    >短信Deliver推送</a
                  >
                </li>
                <li>
                  <a name="#smsInterface-appendix" href="javascript:void(0);"
                    >附录</a
                  >
                </li>
              </ol>
            </div>
            <div id="smsVerification">
              <li>短信验证接口说明</li>
              <ol class="smsVerification-items">
                <li>
                  <a
                    name="#smsVerification-Protocol-specification"
                    href="javascript:void(0);"
                    >协议说明</a
                  >
                </li>
                <li>
                  <a
                    name="#smsVerification-SMS-verification-code-interface"
                    href="javascript:void(0);"
                    >获取短信验证码</a
                  >
                </li>
                <li>
                  <a
                    name="#smsVerification-check-SMS-verification-code-interface"
                    href="javascript:void(0);"
                    >校验短信验证码</a
                  >
                </li>
                <li>
                  <a
                    name="#smsVerification-Ordinary-SMS"
                    href="javascript:void(0);"
                    >普通短信</a
                  >
                </li>
                <li>
                  <a
                    name="#smsVerification-Query-balance-interface"
                    href="javascript:void(0);"
                    >查询余额接口</a
                  >
                </li>
                <li>
                  <a
                    name="#smsVerification-SMS-status-report"
                    href="javascript:void(0);"
                    >短信状态report</a
                  >
                </li>
                <li>
                  <a
                    name="#smsVerification-SMS-status-query"
                    href="javascript:void(0);"
                    >短信状态查询</a
                  >
                </li>
                <li>
                  <a
                    name="#smsVerification-SMS-Deliver-push"
                    href="javascript:void(0);"
                    >短信Deliver推送</a
                  >
                </li>
                <li>
                  <a name="#smsVerification-appendix" href="javascript:void(0);"
                    >附录</a
                  >
                </li>
              </ol>
            </div>
          </ul>
        </div>
      </section>
      <section class="api-right">
        <div class="API-content">
          <!-- ACI接口协议_dom_开始 -->
          <div class="ACI-dom">
            <div id="ACI-communication-model">
              <h3>接口概述</h3>
              <p>A1接口采用HTTP协议，发送响应的数据格式采用JSON格式。</p>
              <h4>1. 通信模型</h4>
              <h4>1.1 业务消息交互</h4>
              <img
                src="../assets/images/Business_message_flow_chart.png"
                alt="业务消息交互流程图"
              />
              <p>
                根据业务消息的不同，AC作为服务器端，提供不同的业务地址和端口。
              </p>
              <table class="table">
                <th>业务类型</th>
                <th>端口地址</th>
                <tr>
                  <td>互联网BSS业务（acbss）</td>
                  <td>具体待定</td>
                </tr>
                <tr>
                  <td>互联网SA业务（acsa）</td>
                  <td>具体待定</td>
                </tr>
              </table>
            </div>
            <div id="ACI-message-format">
              <h3>2. 消息格式</h3>
              <h4>2.1 消息组成</h4>
              <p>消息由消息头和消息体组成，以JSON格式，包含在HTTP载荷中。</p>
              <img
                src="../assets/images/Message_composition_diagram.png"
                alt="消息组成图"
              />
              <ul>
                <li>
                  对于消息头的字段，响应方返回的字段与请求方的字段应该保持一致
                </li>
                <li>Json对象的名称，一律以小写表示</li>
                <li>Json对象的取值为数字的，一律以字符串表示。</li>
                <li>消息都是以GBK编码</li>
              </ul>
              <p>消息头包括如下字段：</p>
              <table class="table">
                <th>消息结构</th>
                <th>内容</th>
                <th>Json对象名称</th>
                <th>说明</th>
                <th>举例</th>
                <tr>
                  <td rowspan="8">消息头</td>
                  <td>版本号</td>
                  <td>ver</td>
                  <td>消息请求方设定的接口协议的版本。消息响应方原值返回。</td>
                  <td>“ver”: “1.0”</td>
                </tr>
                <tr>
                  <td>消息ID</td>
                  <td>msgid</td>
                  <td>
                    消息请求发送方设定的唯一消息标识。具体由发送方设定。重发的消息id必须保持不变。消息响应方原值返回。
                  </td>
                  <td>“msgid”: “4736219853”</td>
                </tr>
                <tr>
                  <td>时间戳</td>
                  <td>ts</td>
                  <td>
                    以YYYYMMDDhhmmssNNN的十进制格式表示，由消息请求发送方在发送消息时设定。其中，NNN表示3位毫秒数。消息响应方原值返回。
                  </td>
                  <td>“ts”: “20140402101356320”</td>
                </tr>
                <tr>
                  <td>业务类型</td>
                  <td>service</td>
                  <td>
                    对于AC系统的业务类型定义如下：
                    <table class="table">
                      <th>业务类型</th>
                      <th>说明</th>
                      <tr>
                        <td>acbss</td>
                        <td>ACBSS业务</td>
                      </tr>
                      <tr>
                        <td>acsa</td>
                        <td>ACSA业务</td>
                      </tr>
                    </table>
                    消息响应方原值返回。
                  </td>
                  <td>“service”: “acbss”</td>
                </tr>
                <tr>
                  <td>消息类型</td>
                  <td>msgtype</td>
                  <td>
                    消息类型与业务类型相关。见“消息类型与业务类型”。消息响应方返回对应请求的消息响应类型。
                  </td>
                  <td>“msgtype”: “subreq”</td>
                </tr>
                <tr>
                  <td>签名</td>
                  <td>sid</td>
                  <td>对消息头和消息体的数字签名。参考后面算法</td>
                  <td>“sid”：“0”</td>
                </tr>
                <tr>
                  <td>保留字段</td>
                  <td>rsvd</td>
                  <td>扩展保留字段。消息响应方原值返回。</td>
                  <td>“rsvd”: “0”</td>
                </tr>
                <tr>
                  <td>应用标识</td>
                  <td>appkey</td>
                  <td>可选。第三方应用的AppKey。AXB业务时必须设置。</td>
                  <td>“appkey”:“kuaidadi”</td>
                </tr>
                <tr>
                  <td>消息体</td>
                  <td>业务消息内容</td>
                  <td></td>
                  <td>内容与业务消息类型相关。见后续业务交互中的消息定义。</td>
                  <td>采用扁平结构方式，取消嵌套结构。</td>
                </tr>
              </table>
              <h4>消息类型</h4>
              <table class="table">
                <th>序号</th>
                <th>消息类型</th>
                <th>消息说明</th>
                <th>产品类别</th>
                <th>交互实体</th>
                <tr>
                  <td>1</td>
                  <td>Subreq</td>
                  <td>订购请求</td>
                  <td>AX</td>
                  <td rowspan="16">BSS</td>
                </tr>
                <tr>
                  <td>2</td>
                  <td>Subrsp</td>
                  <td>订购响应</td>
                  <td>AX</td>
                </tr>
                <tr>
                  <td>3</td>
                  <td>Unsubreq</td>
                  <td>退订请求</td>
                  <td>AX</td>
                </tr>
                <tr>
                  <td>4</td>
                  <td>Unsubrsp</td>
                  <td>退订响应</td>
                  <td>AX</td>
                </tr>
                <tr>
                  <td>5</td>
                  <td>Subqryreq</td>
                  <td>订购查询</td>
                  <td>AX</td>
                </tr>
                <tr>
                  <td>6</td>
                  <td>Subqryrsp</td>
                  <td>订购响应</td>
                  <td>AX</td>
                </tr>
                <tr>
                  <td>7</td>
                  <td>Chgprtmsreq</td>
                  <td>真实号码换号请求</td>
                  <td>AX</td>
                </tr>
                <tr>
                  <td>8</td>
                  <td>Chgprtmsrsp</td>
                  <td>真实号码换号响应</td>
                  <td>AX</td>
                </tr>
                <tr>
                  <td>9</td>
                  <td>Axbsubreq</td>
                  <td>订购请求</td>
                  <td>AXB</td>
                </tr>
                <tr>
                  <td>10</td>
                  <td>Axbsubrsp</td>
                  <td>订购响应</td>
                  <td>AXB</td>
                </tr>
                <tr>
                  <td>11</td>
                  <td>Axbunsubreq</td>
                  <td>退订请求</td>
                  <td>AXB</td>
                </tr>
                <tr>
                  <td>12</td>
                  <td>Axbunsubrsp</td>
                  <td>退订响应</td>
                  <td>AXB</td>
                </tr>
                <tr>
                  <td>13</td>
                  <td>axbsubqryreq</td>
                  <td>订购查询</td>
                  <td>AXB</td>
                </tr>
                <tr>
                  <td>14</td>
                  <td>axbsubqryrsp</td>
                  <td>订购响应</td>
                  <td>AXB</td>
                </tr>
                <tr>
                  <td>15</td>
                  <td>axbsubupdreq</td>
                  <td>AXB订购更新请求</td>
                  <td>AXB</td>
                </tr>
                <tr>
                  <td>16</td>
                  <td>axbsubupdrsp</td>
                  <td>AXB订购更新请求</td>
                  <td>AXB</td>
                </tr>
                <tr>
                  <td>17</td>
                  <td>vcallreq</td>
                  <td>在线语音主叫请求</td>
                  <td>AX</td>
                  <td rowspan="8">SA</td>
                </tr>
                <tr>
                  <td>18</td>
                  <td>vcallrsp</td>
                  <td>在线语音主叫响应</td>
                  <td>AX</td>
                </tr>
                <tr>
                  <td>19</td>
                  <td>smsreq</td>
                  <td>在线短信主叫请求</td>
                  <td>AX</td>
                </tr>
                <tr>
                  <td>20</td>
                  <td>smsrsp</td>
                  <td>在线短信主叫响应</td>
                  <td>AX</td>
                </tr>
                <tr>
                  <td>21</td>
                  <td>switchtimereq</td>
                  <td>用户定时开关机设置请求</td>
                  <td>AX</td>
                </tr>
                <tr>
                  <td>22</td>
                  <td>switchtimersp</td>
                  <td>用户定时开关机设置响应</td>
                  <td>AX</td>
                </tr>
                <tr>
                  <td>23</td>
                  <td>switchqryreq</td>
                  <td>用户开关机查询请求</td>
                  <td>AX</td>
                </tr>
                <tr>
                  <td>24</td>
                  <td>switchqryrsp</td>
                  <td>用户开关机查询响应</td>
                  <td>AX</td>
                </tr>
              </table>
            </div>
            <div id="ACI-Business-interaction">
              <h3>3 业务交互阶段</h3>
              <h4>3.1 业务交互（ACBSS接口）</h4>
              <p>互联网BSS主要处理的互联网业务请求和响应类型如下：</p>
              <ul>
                <li>订购</li>
                <li>退订</li>
                <li>订购关系查询</li>
                <li>真实号码换号</li>
              </ul>
              <p>
                IP发送业务消息到AC A1接口。 AC
                BSS进行内部处理，将结果反馈给IP系统。
              </p>
              <p>消息交互如下：</p>
              <img
                src="../assets/images/Message_interactive_transfer_diagram.png"
                alt="消息交互传输图"
              />
              <p>对于一个唯一的订购关系，AC平台采用如下字段来标识：</p>
              <ul>
                <li>
                  订购关系标识
                  AC系统需要确保“订购关系标识”是唯一的。建议可以考虑使用互联网产品订单编号等。
                </li>
                <li>
                  隐私号码为了保持隐私号码的唯一分配关系。AC系统需要尽量保证隐私号码只属于一个“订购关系”。
                </li>
              </ul>
              <h4>3.1.1 订购请求和响应</h4>
              <p>订购请求</p>
              <table class="table">
                <th rowspan="9">消息头</th>
                <th>内容</th>
                <th>JSON对象名称</th>
                <th>说明</th>
                <th>举例</th>
                <tr>
                  <td>版本号</td>
                  <td>Ver</td>
                  <td></td>
                  <td></td>
                </tr>
                <tr>
                  <td>消息ID</td>
                  <td>Msgid</td>
                  <td></td>
                  <td></td>
                </tr>
                <tr>
                  <td>时间戳</td>
                  <td>Ts</td>
                  <td></td>
                  <td></td>
                </tr>
                <tr>
                  <td>业务类型</td>
                  <td>service</td>
                  <td>Acbss</td>
                  <td></td>
                </tr>
                <tr>
                  <td>消息类型</td>
                  <td>msgtype</td>
                  <td>subreq</td>
                  <td></td>
                </tr>
                <tr>
                  <td>签名</td>
                  <td>Sid</td>
                  <td></td>
                  <td></td>
                </tr>
                <tr>
                  <td>应用标识</td>
                  <td>appkey</td>
                  <td>第三方应用的AppKey</td>
                  <td></td>
                </tr>
                <tr>
                  <td>保留字段</td>
                  <td>Rsvd</td>
                  <td></td>
                  <td></td>
                </tr>
                <tr>
                  <td rowspan="7">消息体</td>
                  <td>被保护的真实号码</td>
                  <td>Prtms</td>
                  <td></td>
                  <td></td>
                </tr>
                <tr>
                  <td>隐私号码</td>
                  <td>acms</td>
                  <td>AC动态分配或者指定</td>
                  <td></td>
                </tr>
                <tr>
                  <td>订购时间</td>
                  <td>Subts</td>
                  <td>格式为YYYYMMDDhhmmss。时间采用北京时间，24小时制。</td>
                  <td>“subts”:“20140728145921”</td>
                </tr>
                <tr>
                  <td>订购类型</td>
                  <td>producttype</td>
                  <td>
                    现阶段支持的类型：
                    <ol>
                      <li>包年</li>
                      <li>包季</li>
                      <li>包月</li>
                      <li>按次</li>
                      <li>体验</li>
                    </ol>
                  </td>
                  <td>“producttype”:“0”</td>
                </tr>
                <tr>
                  <td>姓名</td>
                  <td>name</td>
                  <td>必选</td>
                  <td>“name”:“张三”</td>
                </tr>
                <tr>
                  <td>证件类型</td>
                  <td>cardtype</td>
                  <td>必选</td>
                  <td>“cardtype”：“”</td>
                </tr>
                <tr>
                  <td>身份证号码</td>
                  <td>cardno</td>
                  <td>必选</td>
                  <td>“cardno”：“”</td>
                </tr>
              </table>
              <h4>订购响应</h4>
              <table class="table">
                <th rowspan="9">消息头</th>
                <th>内容</th>
                <th>JSON对象名称</th>
                <th>说明</th>
                <th>举例</th>
                <tr>
                  <td>版本号</td>
                  <td>ver</td>
                  <td></td>
                </tr>
                <tr>
                  <td>消息ID</td>
                  <td>msgid</td>
                  <td>　 　</td>
                </tr>
                <tr>
                  <td>时间戳</td>
                  <td>ts</td>
                  <td>　 　</td>
                </tr>
                <tr>
                  <td>业务类型</td>
                  <td>service</td>
                  <td>acbss 　</td>
                </tr>
                <tr>
                  <td>消息类型</td>
                  <td>msgtype</td>
                  <td>subrsp 　</td>
                </tr>
                <tr>
                  <td>签名</td>
                  <td>sid</td>
                  <td>　</td>
                </tr>
                <tr>
                  <td>应用标识</td>
                  <td>appkey</td>
                  <td>第三方应用的AppKey。</td>
                </tr>
                <tr>
                  <td>保留字段</td>
                  <td>rsvd</td>
                  <td>　 　</td>
                </tr>
                <tr>
                  <td rowspan="3">消息体</td>
                  <td>返回码</td>
                  <td>result</td>
                  <td style="float: left">
                    采用类似http的状态码风格。
                    <ul style="list-style: none">
                      <li>成功返回码：</li>
                      <li>200：成功</li>
                      <li>其他：</li>
                      <br />
                      <li>客户端（IP系统）错误：</li>
                      <li>400：请求报文语法错误</li>
                      <li>401：认证未通过</li>
                      <li>403：订购关系不存在</li>
                      <li>404：绑定数据不一致</li>
                      <li>其他：</li>
                      <br />
                      <li>服务端（AC）错误：</li>
                      <li>501：业务处理超时</li>
                      <li>502：服务暂时不可用</li>
                    </ul>
                  </td>
                  <td></td>
                </tr>
                <tr>
                  <td>订购关系标识</td>
                  <td>subid</td>
                  <td></td>
                  <td></td>
                </tr>
                <tr>
                  <td>隐私号码</td>
                  <td>acms</td>
                  <td></td>
                  <td></td>
                </tr>
              </table>
              <h4>3.1.2 退订请求和响应</h4>
              <table class="table">
                <th rowspan="9">消息头</th>
                <th>内容</th>
                <th>JSON对象名称</th>
                <th>说明</th>
                <th>举例</th>
                <tr>
                  <td>版本号</td>
                  <td>ver</td>
                  <td></td>
                  <td></td>
                </tr>
                <tr>
                  <td>消息ID</td>
                  <td>msgid 　</td>
                  <td></td>
                  <td></td>
                </tr>
                <tr>
                  <td>时间戳</td>
                  <td>ts 　</td>
                  <td></td>
                  <td></td>
                </tr>
                <tr>
                  <td>业务类型</td>
                  <td>service acbss</td>
                  <td></td>
                  <td></td>
                </tr>
                <tr>
                  <td>消息类型</td>
                  <td>msgtype unsubreq</td>
                  <td></td>
                  <td></td>
                </tr>
                <tr>
                  <td>签名</td>
                  <td>sid</td>
                  <td></td>
                  <td></td>
                </tr>
                <tr>
                  <td>应用标识</td>
                  <td>appkey</td>
                  <td>第三方应用的AppKey。</td>
                  <td></td>
                </tr>
                <tr>
                  <td>保留字段</td>
                  <td>rsvd</td>
                  <td></td>
                  <td></td>
                </tr>
                <tr>
                  <td rowspan="3">消息体</td>
                  <td>被保护的真实号码</td>
                  <td>prtms</td>
                  <td></td>
                  <td></td>
                </tr>
                <tr>
                  <td>隐私号码</td>
                  <td>acms</td>
                  <td></td>
                  <td></td>
                </tr>
                <tr>
                  <td>退订时间</td>
                  <td>unsubts</td>
                  <td>格式为YYYYMMDDhhmmss。时间采用北京时间，24小时制。</td>
                  <td></td>
                </tr>
              </table>
              <h4>退订响应</h4>
              <table class="table">
                <th rowspan="9">消息头</th>
                <th>内容</th>
                <th>JSON对象名称</th>
                <th>说明</th>
                <th>举例</th>
                <tr>
                  <td>版本号</td>
                  <td>ver</td>
                  <td></td>
                </tr>
                <tr>
                  <td>消息ID</td>
                  <td>msgid</td>
                  <td></td>
                </tr>
                <tr>
                  <td>时间戳</td>
                  <td>ts</td>
                  <td></td>
                </tr>
                <tr>
                  <td>业务类型</td>
                  <td>service</td>
                  <td>acbss</td>
                </tr>
                <tr>
                  <td>消息类型</td>
                  <td>msgtype</td>
                  <td>unsubrsp</td>
                </tr>
                <tr>
                  <td>签名</td>
                  <td>sid</td>
                  <td></td>
                </tr>
                <tr>
                  <td>应用标识</td>
                  <td>appkey</td>
                  <td>第三方应用的AppKey。</td>
                </tr>
                <tr>
                  <td>保留字段</td>
                  <td>rsvd</td>
                  <td></td>
                </tr>
                <tr>
                  <td rowspan="2">消息体</td>
                  <td>返回码</td>
                  <td>result</td>
                  <td>参见“返回码定义”</td>
                </tr>
                <tr>
                  <td>订购关系标识</td>
                  <td>subid</td>
                  <td></td>
                </tr>
              </table>
              <h3>3.1.3 订购查询请求和响应</h3>
              <p>订购查询请求</p>
              <table class="table">
                <th rowspan="8">消息头</th>
                <th>内容</th>
                <th>JSON对象名称</th>
                <th>说明</th>
                <th>举例</th>
                <tr>
                  <td>版本号</td>
                  <td>ver</td>
                  <td></td>
                </tr>
                <tr>
                  <td>消息ID</td>
                  <td>msgid</td>
                  <td></td>
                </tr>
                <tr>
                  <td>时间戳</td>
                  <td>ts</td>
                  <td></td>
                </tr>
                <tr>
                  <td>业务类型</td>
                  <td>service</td>
                  <td>acbss</td>
                </tr>
                <tr>
                  <td>消息类型</td>
                  <td>msgtype</td>
                  <td>subqryreq</td>
                </tr>
                <tr>
                  <td>签名</td>
                  <td>sid</td>
                  <td></td>
                </tr>
                <tr>
                  <td>保留字段</td>
                  <td>rsvd</td>
                  <td></td>
                </tr>
                <tr>
                  <td rowspan="3">消息体</td>
                  <td>订购关系标识</td>
                  <td>subid</td>
                  <td>方式一</td>
                </tr>
                <tr>
                  <td>被保护的真实号码</td>
                  <td>prtms</td>
                  <td>方式二</td>
                </tr>
                <tr>
                  <td>隐私号码</td>
                  <td>acms</td>
                  <td></td>
                </tr>
              </table>
              <p>订购查询响应</p>
              <table class="table">
                <th rowspan="8">消息头</th>
                <th>内容</th>
                <th>JSON对象名称</th>
                <th>说明</th>
                <th>举例</th>
                <tr>
                  <td>版本号</td>
                  <td>ver</td>
                </tr>
                <tr>
                  <td>消息ID</td>
                  <td>msgid</td>
                </tr>
                <tr>
                  <td>时间戳</td>
                  <td>ts</td>
                </tr>
                <tr>
                  <td>业务类型</td>
                  <td>service</td>
                  <td>acbss　</td>
                </tr>
                <tr>
                  <td>消息类型</td>
                  <td>msgtype</td>
                  <td>subqryrsp　</td>
                </tr>
                <tr>
                  <td>签名</td>
                  <td>sid</td>
                </tr>
                <tr>
                  <td>保留字段</td>
                  <td>rsvd</td>
                </tr>
                <tr>
                  <td rowspan="9">消息体</td>
                  <td>返回码</td>
                  <td>result</td>
                  <td>参见“返回码定义”</td>
                </tr>
                <tr>
                  <td>订购关系标识</td>
                  <td>subid</td>
                </tr>
                <tr>
                  <td>被保护的真实号码</td>
                  <td>prtms</td>
                </tr>
                <tr>
                  <td>隐私号码</td>
                  <td>acms</td>
                </tr>
                <tr>
                  <td>订购时间</td>
                  <td>subts</td>
                </tr>
                <tr>
                  <td>订购产品类型</td>
                  <td>producttype</td>
                </tr>
                <tr>
                  <td>姓名</td>
                  <td>name</td>
                </tr>
                <tr>
                  <td>证件类型</td>
                  <td>cardtype</td>
                </tr>
                <tr>
                  <td>身份证号码</td>
                  <td>cardno</td>
                  <td>“cardno”：“”</td>
                </tr>
              </table>
              <h3>3.1.4 真实号码换号请求和响应</h3>
              <p>真实号码换号请求</p>
              <table class="table">
                <th rowspan="7">消息头</th>
                <th>内容</th>
                <th>JSON对象名称</th>
                <th>说明</th>
                <th>举例</th>
                <tr>
                  <td>版本号</td>
                  <td>ver</td>
                  <td></td>
                </tr>
                <tr>
                  <td>消息ID</td>
                  <td>msgid</td>
                  <td></td>
                </tr>
                <tr>
                  <td>时间戳</td>
                  <td>ts</td>
                  <td></td>
                </tr>
                <tr>
                  <td>业务类型</td>
                  <td>service</td>
                  <td>acbss</td>
                  　
                </tr>
                <tr>
                  <td>消息类型</td>
                  <td>msgtype</td>
                  <td>chgprtmsreq</td>
                  　
                </tr>
                <tr>
                  <td>签名</td>
                  <td>sid</td>
                  <td>　</td>
                </tr>
                <tr>
                  <td>保留字段</td>
                  <td>rsvd</td>
                  <td></td>
                  　
                </tr>
                <tr>
                  <td rowspan="5">消息体</td>
                  <td>订购关系标识</td>
                  <td>subid</td>
                  <td>与订购请求的subid一致，AC返回的sub_id</td>
                  <td></td>
                </tr>
                <tr>
                  <td>隐私号码</td>
                  <td>acms</td>
                  <td></td>
                </tr>
                <tr>
                  <td>当前真实号码</td>
                  <td>oldprtms</td>
                  <td></td>
                </tr>
                <tr>
                  <td>新的真实号码</td>
                  <td>newprtms</td>
                  <td></td>
                </tr>
                <tr>
                  <td>换号时间</td>
                  <td>chgts</td>
                  <td>格式为YYYYMMDDhhmmss。时间采用北京时间，24小时制。</td>
                </tr>
              </table>
              <h4>真实号码换号响应:</h4>
              <table class="table">
                <th rowspan="8">消息头</th>
                <th>内容</th>
                <th>JSON对象名称</th>
                <th>说明</th>
                <th>举例</th>
                <tr>
                  <td>版本号</td>
                  <td>ver</td>
                  <td>　</td>
                  　
                </tr>
                <tr>
                  <td>消息ID</td>
                  <td>msgid</td>
                  <td>　</td>
                  　
                </tr>
                <tr>
                  <td>时间戳</td>
                  <td>ts</td>
                  <td>　</td>
                  　
                </tr>
                <tr>
                  <td>业务类型</td>
                  <td>service</td>
                  <td>acbss</td>
                  　
                </tr>
                <tr>
                  <td>消息类型</td>
                  <td>msgtype</td>
                  <td>chgprtmsrsp</td>
                  　
                </tr>
                <tr>
                  <td>签名</td>
                  <td>sid</td>
                  <td>　</td>
                </tr>
                <tr>
                  <td>保留字段</td>
                  <td>rsvd</td>
                  <td>　</td>
                  　
                </tr>
                <tr>
                  <td rowspan="2">消息体</td>
                  <td>返回码</td>
                  <td>result</td>
                  <td>参见“返回码定义”</td>
                  　
                </tr>
                <tr>
                  <td>订购关系标识</td>
                  <td>subid</td>
                  <td></td>
                </tr>
              </table>
              <h3>3.2业务交互（ACSA接口）</h3>
              <p>互联网SA主要处理的互联网业务请求和响应类型如下：</p>
              <p>&nbsp;&nbsp;&nbsp;&nbsp;在线语音主叫</p>
              <p>
                IP业务系统发起请求，AC接收后，进行内部处理，响应处理结果，后续启动业务流程。
              </p>
              <img
                src="../assets/images/ACSA_Business_interaction_diagram.png"
                alt="ACSA业务交互图"
              />
              <h4>3.2.1 在线语音主叫请求和响应</h4>
              <p>在线语音主叫请求</p>
              <table class="table">
                <th rowspan="8">消息头</th>
                <th>内容</th>
                <th>JSON对象名称</th>
                <th>说明</th>
                <th>举例</th>
                <tr>
                  <td>版本号</td>
                  <td>ver</td>
                  <td>　</td>
                  　
                </tr>
                <tr>
                  <td>消息ID</td>
                  <td>msgid</td>
                  <td>　</td>
                  　
                </tr>
                <tr>
                  <td>时间戳</td>
                  <td>ts</td>
                  <td>　</td>
                  　
                </tr>
                <tr>
                  <td>业务类型</td>
                  <td>service</td>
                  <td>acsa</td>
                  　
                </tr>
                <tr>
                  <td>消息类型</td>
                  <td>msgtype</td>
                  <td>vcallreq</td>
                  　
                </tr>
                <tr>
                  <td>签名</td>
                  <td>sid</td>
                  <td>　</td>
                </tr>
                <tr>
                  <td>保留字段</td>
                  <td>rsvd</td>
                  <td>　</td>
                  　
                </tr>
                <tr>
                  <td rowspan="2">消息体</td>
                  <td>隐私号码</td>
                  <td>acms</td>
                  <td></td>
                </tr>
                <tr>
                  <td>被叫号码</td>
                  <td>calledms</td>
                  <td>被叫号码</td>
                </tr>
              </table>
              <p>在线语音主叫响应</p>
              <table class="table">
                <th rowspan="8">消息头</th>
                <th>内容</th>
                <th>JSON对象名称</th>
                <th>说明</th>
                <th>举例</th>
                <tr>
                  <td>版本号</td>
                  <td>ver</td>
                  　
                </tr>
                <tr>
                  <td>消息ID</td>
                  <td>msgid</td>
                  　
                </tr>
                <tr>
                  <td>时间戳</td>
                  <td>ts</td>
                  　
                </tr>
                <tr>
                  <td>业务类型</td>
                  <td>service</td>
                  <td>acsa</td>
                </tr>
                <tr>
                  <td>消息类型</td>
                  <td>msgtype</td>
                  <td>vcallrsp</td>
                  　
                </tr>
                <tr>
                  <td>签名</td>
                  <td>sid</td>
                </tr>
                <tr>
                  <td>保留字段</td>
                  <td>rsvd</td>
                </tr>
                <tr>
                  <td>消息体</td>
                  <td>返回码</td>
                  <td>result</td>
                  <td>参见“返回码定义”</td>
                </tr>
              </table>
              <h4>3.2.2 用户定时开关机设置请求和响应</h4>
              <p>用户定时开关机设置请求</p>
              <table class="table">
                <th rowspan="8">消息头</th>
                <th>内容</th>
                <th>JSON对象名称</th>
                <th>说明</th>
                <th>举例</th>
                <tr>
                  <td>版本号</td>
                  <td>ver</td>
                  　 　
                </tr>
                <tr>
                  <td>消息ID</td>
                  <td>msgid</td>
                  　 　
                </tr>
                <tr>
                  <td>时间戳</td>
                  <td>ts</td>
                  　 　
                </tr>
                <tr>
                  <td>业务类型</td>
                  <td>service</td>
                  <td>acsa</td>
                  　
                </tr>
                <tr>
                  <td>消息类型</td>
                  <td>msgtype</td>
                  <td>switchtimerreq</td>
                  　
                </tr>
                <tr>
                  <td>签名</td>
                  <td>sid</td>
                  　
                </tr>
                <tr>
                  <td>保留字段</td>
                  <td>rsvd</td>
                </tr>
                <tr>
                  <td rowspan="3">消息体</td>
                  <td>隐私号码</td>
                  <td>acms</td>
                  <td></td>
                  <td></td>
                </tr>
                <tr>
                  <td>定时关机时间点</td>
                  <td>closetime</td>
                  <td style="width: 60px">
                    可选。24小时格式表示hhmm如果closetime出现，但是值为空，则表示取消相应设置。即“closetime”:“”表示取消设置。
                  </td>
                  <td>“closetime”:“14:30”</td>
                </tr>
                <tr>
                  <td>定时开机时间点</td>
                  <td>opentime</td>
                  <td style="width: 60px">
                    可选。24小时格式表示hhmm如果opentime出现，但是值为空，则表示取消相应设置。即“opentime”:“”表示取消设置。
                  </td>
                  <td>“opentime”:“17:30”</td>
                </tr>
              </table>
              <p>用户定时开关机设置响应:</p>
              <table class="table">
                <th rowspan="8">消息头</th>
                <th>内容</th>
                <th>JSON对象名称</th>
                <th>说明</th>
                <th>举例</th>
                <tr>
                  <td>版本号</td>
                  <td>ver</td>
                  　 　
                </tr>
                <tr>
                  <td>消息ID</td>
                  <td>msgid</td>
                  　 　
                </tr>
                <tr>
                  <td>时间戳</td>
                  <td>ts</td>
                  　 　
                </tr>
                <tr>
                  <td>业务类型</td>
                  <td>service</td>
                  <td>acsa</td>
                  　
                </tr>
                <tr>
                  <td>消息类型</td>
                  <td>msgtype</td>
                  <td>switchtimerrsp</td>
                  　
                </tr>
                <tr>
                  <td>签名</td>
                  <td>sid</td>
                  　
                </tr>
                <tr>
                  <td>保留字段</td>
                  <td>rsvd</td>
                  　 　
                </tr>
                <tr>
                  <td>消息体</td>
                  <td>返回码</td>
                  <td>result</td>
                  <td>参见“返回码定义”</td>
                </tr>
              </table>
              <h4>3.2.3 用户开关机查询请求和响应</h4>
              <p>用户开关机查询请求:</p>
              <table class="table">
                <th rowspan="8">消息头</th>
                <th>内容</th>
                <th>JSON对象名称</th>
                <th>说明</th>
                <th>举例</th>
                <tr>
                  <td>版本号</td>
                  <td>ver</td>
                  <td></td>
                  　
                </tr>
                <tr>
                  <td>消息ID</td>
                  <td>msgid</td>
                  <td>　</td>
                  　
                </tr>
                <tr>
                  <td>时间戳</td>
                  <td>ts</td>
                  <td></td>
                  　
                </tr>
                <tr>
                  <td>业务类型</td>
                  <td>service</td>
                  <td>acsa</td>
                  　
                </tr>
                <tr>
                  <td>消息类型</td>
                  <td>msgtype</td>
                  <td>switchqryreq</td>
                  　
                </tr>
                <tr>
                  <td>签名</td>
                  <td>sid</td>
                  <td></td>
                </tr>
                <tr>
                  <td>保留字段</td>
                  <td>rsvd</td>
                  <td>　</td>
                  　
                </tr>
                <tr>
                  <td>消息体</td>
                  <td>隐私号码</td>
                  <td>acms</td>
                  <td></td>
                </tr>
              </table>
              <p>用户开关机查询响应</p>
              <table class="table">
                <th rowspan="8">消息头</th>
                <th>内容</th>
                <th>JSON对象名称</th>
                <th>说明</th>
                <th>举例</th>
                <tr>
                  <td>版本号</td>
                  <td>ver</td>
                  <td></td>
                  　
                </tr>
                <tr>
                  <td>消息ID</td>
                  <td>msgid</td>
                  <td>　</td>
                  　
                </tr>
                <tr>
                  <td>时间戳</td>
                  <td>ts</td>
                  <td></td>
                  　
                </tr>
                <tr>
                  <td>业务类型</td>
                  <td>service</td>
                  <td>acsa</td>
                  　
                </tr>
                <tr>
                  <td>消息类型</td>
                  <td>msgtype</td>
                  <td>switchqryreq</td>
                  　
                </tr>
                <tr>
                  <td>签名</td>
                  <td>sid</td>
                  <td></td>
                </tr>
                <tr>
                  <td>保留字段</td>
                  <td>rsvd</td>
                  <td>　</td>
                  　
                </tr>
                <tr>
                  <td rowspan="4">消息体</td>
                  <td>返回码</td>
                  <td>result</td>
                  <td>参见“返回码定义”</td>
                  <td></td>
                  　
                </tr>
                <tr>
                  <td>当前开关机状态</td>
                  <td>switch</td>
                  <td>0：开机 1：关机</td>
                  <td>“switch”: “1”</td>
                  <td></td>
                </tr>
                <tr>
                  <td>定时关机时间点</td>
                  <td>closetime</td>
                  <td>
                    24小时格式表示hhmm如果closetime出现，但是值为空，则表示无相应设置。即“closetime”:“”表示无定时关机设置。
                  </td>
                  <td>“closetime”:“14:30”</td>
                </tr>
                <tr>
                  <td>定时开机时间点</td>
                  <td>opentime</td>
                  <td>
                    24小时格式表示hhmm如果opentime出现，但是值为空，则表示无相应设置。即“opentime”:“”表示无定时开机设置。
                  </td>
                  <td>“opentime”:“17:30”</td>
                </tr>
              </table>
              <h4>3.2.4 系统呼叫结束推送（准实时）</h4>
              <p>推送机制</p>
              <p>采用json over http协议</p>
              <p>协议：</p>
              <table class="table">
                <tr>
                  <td rowspan="6">#协议参数</td>
                  <td>参数</td>
                  <td>注释</td>
                </tr>
                <tr>
                  <td>'v': '1.0',</td>
                  <td>#版本号</td>
                </tr>
                <tr>
                  <td>'method' : 'add_call_release',</td>
                  <td>#方法</td>
                </tr>
                <tr>
                  <td>'app_key': 'ac',</td>
                  <td>#调用方appkey</td>
                </tr>
                <tr>
                  <td>'sign': '0BE1A00DD73A0A3D6037657B7C3C9DF3',</td>
                  <td>#签名</td>
                </tr>
                <tr>
                  <td>'timestamp': '2016-06-22 14:03:21',</td>
                  <td>#时间戳</td>
                </tr>
                <tr>
                  <td rowspan="11">#业务参数</td>
                </tr>
                <tr>
                  <td>'phone_no': '13333300000',</td>
                  <td>#手机号码</td>
                </tr>
                <tr>
                  <td>'secret_no': '8618788006777',</td>
                  <td>#隐私号码</td>
                </tr>
                <tr>
                  <td>'call_type':'0',</td>
                  <td>#呼叫类型</td>
                </tr>
                <tr>
                  <td>'peer_no': '13344400000',</td>
                  <td>#对端号码</td>
                </tr>
                <tr>
                  <td>'call_id': '0d01000000080000000000000000',</td>
                  <td>#通话唯一标识</td>
                </tr>
                <tr>
                  <td>'call_time' : '2016-06-22 14:03:20',</td>
                  <td>#通话开始时间</td>
                </tr>
                <tr>
                  <td>'release_time' : '2016-06-22 14:03:20',</td>
                  <td>#通话结束时间</td>
                </tr>
                <tr>
                  <td>'release_dir' : '1',</td>
                  <td>#释放方向</td>
                </tr>
                <tr>
                  <td>'release_cause' : '16',</td>
                  <td>#释放原因</td>
                </tr>
                <tr>
                  <td>'ringing_time' : '2016-06-22 14:03:20',</td>
                  <td>#振铃开始时间</td>
                </tr>
              </table>
              <p>推送请求：</p>
              <table class="table">
                <tr>
                  <td>API名称</td>
                  <td>method = add_call_release</td>
                  <td></td>
                </tr>
                <th>接入方标识</th>
                <th>app_key</th>
                <th>标识接入方</th>
                <tr>
                  <td>呼叫类型</td>
                  <td>call_type</td>
                  <td>
                    AC业务： 0：DTMF方式通话主叫 1：通话被叫 2：短信发送
                    3：短信接收 128:PS方式通话主叫
                  </td>
                </tr>
                <tr>
                  <td>真实号码</td>
                  <td>phone_no</td>
                  <td>真实号码为A</td>
                </tr>
                <tr>
                  <td>隐私号码</td>
                  <td>secret_no</td>
                  <td>隐私号码为X</td>
                </tr>
                <tr>
                  <td>对端号码</td>
                  <td>peer_no</td>
                  <td>对端号码为B或者其它填充0</td>
                </tr>
                <tr>
                  <td>振铃开始时间</td>
                  <td>ringing_time</td>
                  <td>格式: yyyy-MM-dd HH:mm:ss</td>
                </tr>
                <tr>
                  <td>通话开始时间</td>
                  <td>call_time</td>
                  <td>格式: yyyy-MM-dd HH:mm:ss</td>
                </tr>
                <tr>
                  <td>通话结束时间</td>
                  <td>release_time</td>
                  <td>格式: yyyy-MM-dd HH:mm:ss</td>
                </tr>
                <tr>
                  <td>通话标识</td>
                  <td>call_id</td>
                  <td>业务参考号</td>
                </tr>
                <tr>
                  <td>释放方向</td>
                  <td>release_dir</td>
                  <td>1表示主叫， 2表示被叫， 0表示平台释放</td>
                </tr>
                <tr>
                  <td>释放原因</td>
                  <td>release_cause</td>
                  <td>
                    <table>
                      <tr>
                        <td>000 0001（1） 未分配的号码</td>
                      </tr>
                      <tr>
                        <td>000 0010（2） 无路由到指定的转接网</td>
                      </tr>
                      <tr>
                        <td>000 0011（3） 无路由到目的地</td>
                      </tr>
                      <tr>
                        <td>000 0100（4） 发送专用信息音</td>
                      </tr>
                      <tr>
                        <td>001 0000（16） 正常的呼叫拆线</td>
                      </tr>
                      <tr>
                        <td>001 0001（17） 用户忙</td>
                      </tr>
                      <tr>
                        <td>001 0010（18） 用户未响应</td>
                      </tr>
                      <tr>
                        <td>001 0011（19） 用户未应答</td>
                      </tr>
                      <tr>
                        <td>001 0100（20） 用户缺席</td>
                      </tr>
                      <tr>
                        <td>001 0101（21） 呼叫拒收</td>
                      </tr>
                      <tr>
                        <td>001 0110（22） 号码改变</td>
                      </tr>
                      <tr>
                        <td>001 1011（27） 目的地不可达</td>
                      </tr>
                      <tr>
                        <td>001 1100（28） 无效的号码格式（地址不全）</td>
                      </tr>
                      <tr>
                        <td>001 1101（29） 性能拒绝</td>
                      </tr>
                      <tr>
                        <td>001 1111（31） 正常—未指定 类别</td>
                      </tr>
                      <tr>
                        <td>010，资源不可用类：</td>
                      </tr>
                      <tr>
                        <td>010 0010（34） 无电路/通路可用</td>
                      </tr>
                      <tr>
                        <td>010 1010（42） 交换设备拥塞 类别</td>
                      </tr>
                      <tr>
                        <td>011，业务或任选不可用类：</td>
                      </tr>
                      <tr>
                        <td>011 0010（50） 所请求的性能未预定</td>
                      </tr>
                      <tr>
                        <td>011 0101（53） CUG中限制去呼叫</td>
                      </tr>
                      <tr>
                        <td>011 0111（55） CUG中限制来呼叫</td>
                      </tr>
                      <tr>
                        <td>011 1001（57） 承载能力无权</td>
                      </tr>
                      <tr>
                        <td>011 1010（58） 承载能力目前不可用</td>
                      </tr>
                      <tr>
                        <td>类别100，业务或任选未实现类：</td>
                      </tr>
                      <tr>
                        <td>100 0001（65） 承载能力未实现</td>
                      </tr>
                      <tr>
                        <td>100 0101（69） 所请求的性能未实现</td>
                      </tr>
                      <tr>
                        <td>类别101，无效的消息（例如参数超出范围）类：</td>
                      </tr>
                      <tr>
                        <td>101 0111（87） 被叫用户不是CUG的成员</td>
                      </tr>
                      <tr>
                        <td>101 1000（88） 不兼容的目的地</td>
                      </tr>
                      <tr>
                        <td>101 1010（90） 不存在的CUG</td>
                      </tr>
                      <tr>
                        <td>101 1011（91） 无效的转接网选择</td>
                      </tr>
                      <tr>
                        <td>101 1111（95） 无效的消息，未指定 类别</td>
                      </tr>
                      <tr>
                        <td>110，协议错误（例如未知的消息）类：</td>
                      </tr>
                      <tr>
                        <td>110 0001（97） 消息类型不存在或未实现</td>
                      </tr>
                      <tr>
                        <td>110 0011（99） 参数不存在或未实现</td>
                      </tr>
                      <tr>
                        <td>110 0110（102）定时器终了时恢复</td>
                      </tr>
                      <tr>
                        <td>110 0101（103）参数不存在或未实现—传递</td>
                      </tr>
                      <tr>
                        <td>110 1110（110）消息带有未被识别的参数 —舍弃</td>
                      </tr>
                      <tr>
                        <td>110 1111（111）协议错误，未指定</td>
                      </tr>
                      <tr>
                        <td>类别111，互通类：</td>
                      </tr>
                      <tr>
                        <td>111 1111（127）互通，未指定类别</td>
                      </tr>
                      <tr>
                        <td>1100、1101，平台拒绝类：</td>
                      </tr>
                      <tr>
                        <td>1100 1010（202）用户忙，MSRN获取失败，平台挂机</td>
                      </tr>
                      <tr>
                        <td>1100 1011（203）用户去活，平台挂机</td>
                      </tr>
                      <tr>
                        <td>1100 1100（204）用户在平台侧关机，平台挂机</td>
                      </tr>
                      <tr>
                        <td>1100 1101（205）用户未开户，平台挂机</td>
                      </tr>
                      <tr>
                        <td>1100 1110（206）小号不允许呼叫，平台挂机</td>
                      </tr>
                      <tr>
                        <td>1100 1111（207）主号拨打小号，平台挂机</td>
                      </tr>
                      <tr>
                        <td>1101 0001（209）主叫打小号带原始被叫，平台挂机</td>
                      </tr>
                    </table>
                  </td>
                </tr>
              </table>
              <p>推送响应:</p>
              <table class="table">
                <th>接收状态</th>
                <th>is_success</th>
                <th>ture：成功， false：失败</th>
              </table>
              <p>错误码：</p>
              <table class="table">
                <th>错误码</th>
                <th>错误信息</th>
                <th>建议</th>
                <tr>
                  <td>400</td>
                  <td>UnSupport Method:</td>
                  <td>method参数有误</td>
                </tr>
                <tr>
                  <td>403</td>
                  <td>Erro AppKey</td>
                  <td>appkey错误</td>
                </tr>
                <tr>
                  <td>403</td>
                  <td>Error Sign</td>
                  <td>签名错误</td>
                </tr>
                <tr>
                  <td>202</td>
                  <td>具体的Exception</td>
                  <td>请求接收，处理错误</td>
                </tr>
              </table>
              <p>请求示例：</p>
              <p>
                http://172.27.111.69/msg?v=1.0&method=add_call_release&timestamp=2014-08-18
                %2016:59:11&app_key=abc&sign=BA9854BED1A2986B061E2713F403C752&phone_no=1860
                0000000&secret_no=17000000000&call_type=1&peer_no=13900000000&call_id=1919&
                ringing_time=2014-08-18%2016:59:10&call_time=2014-08-18%2016:59:11&release_
                time=2014-08-18%2016:59:21&release_dir=1&release_cause=17
              </p>
              <p style="color: red">
                需要说明一下，接口调用中的appkey和secret都由服务端来分配。
              </p>
              <p>响应示例：</p>
              <table class="table">
                <th>成功：{"response":{"is_success":true}}</th>
                <th>
                  失败：{"response":{"is_success":false,"err_code":"400","err_msg":"呼叫类型不
                  能为空！"}}
                </th>
              </table>
              <h4>3.3业务交互（AXB业务BSS接口）</h4>
              <p>ACBSS主要处理的AXB业务请求和响应类型如下：</p>
              <ul>
                <li>订购</li>
                <li>退订</li>
                <li>订购关系查询</li>
                <li>更新</li>
              </ul>
              <p>
                对于一个唯一的订购关系，AXB业务场景下BSS采用如下字段来标识：
              </p>
              <ul>
                <li>订购关系标识</li>
                <p>AC系统需要确保“订购关系标识”是唯一的。</p>
                <li>AXB三元组</li>
                <p>AXB中的A，X，B形成唯一三元组。</p>
              </ul>
              <h4>3.3.1 订购请求和响应</h4>
              <p>订购请求：</p>
              <table class="table">
                <th rowspan="9">消息头</th>
                <th>内容</th>
                <th>JSON对象名称</th>
                <th>说明</th>
                <th>举例</th>
                <tr>
                  <td>版本号</td>
                  <td>Ver</td>
                  　 　
                </tr>
                <tr>
                  <td>消息ID</td>
                  <td>Msgid</td>
                  　
                </tr>
                <tr>
                  <td>时间戳</td>
                  <td>Ts</td>
                  　 　
                </tr>
                <tr>
                  <td>业务类型</td>
                  <td>service</td>
                  <td>acbss</td>
                  　
                </tr>
                <tr>
                  <td>消息类型</td>
                  <td>msgtype</td>
                  <td>axbsubreq</td>
                </tr>
                <tr>
                  <td>签名</td>
                  <td>Sid</td>
                  　
                </tr>
                <tr>
                  <td>保留字段</td>
                  <td>Rsvd</td>
                  　 　
                </tr>
                <tr>
                  <td>应用标识</td>
                  <td>appkey</td>
                  <td>第三方应用的AppKey。 AXB业务时必须设置，不能为空。</td>
                  <td>“appkey”:“GZAXB”</td>
                </tr>
                <tr>
                  <td rowspan="12">消息体</td>
                  <td>真实号码</td>
                  <td>prtms</td>
                  <td>
                    对应“产品类别”定义的AXB业务（简称AXB业务，以下同）中的号码A
                    注：以真实号码为主叫，AXB业务中的
                    A为主叫，X为隐私号码，B为对端号码。以下同。
                  </td>
                </tr>
                <tr>
                  <td>隐私号码</td>
                  <td>acms</td>
                  <td>对应AXB业务中的号码X，动态分配</td>
                </tr>
                <tr>
                  <td>其他号码</td>
                  <td>otherms</td>
                  <td>
                    AXB业务时可设置。对应AXB业务中的号码B。AC小号场景不支持设置。
                  </td>
                  <td>“otherms”:“8613005711234”</td>
                </tr>
                <tr>
                  <td>订购时间</td>
                  <td>subts</td>
                  <td>格式为YYYYMMDDhhmmss。时间采用北京时间，24小时制。</td>
                  <td>“subts” :“20140728145921”</td>
                </tr>
                <tr>
                  <td>退订时间</td>
                  <td>unsubts</td>
                  <td>
                    格式为YYYYMMDDhhmmss。时间采用北京时间，24小时制
                    .这个时间大于订购时间，如果时间到达则执行退订。可选
                  </td>
                  <td>“unsubts” :“20140728145921”</td>
                </tr>
                <tr>
                  <td>自动退订方式</td>
                  <td>unsubmethod</td>
                  <td>
                    可选 0：振铃退订 1：挂机退订
                    如果退订时间不为空，则根据退订时间退订的优先级最高。
                  </td>
                  <td>“unsubmethod”:“1”</td>
                </tr>
                <tr>
                  <td>订购类型</td>
                  <td>producttype</td>
                  <td>
                    现阶段支持的类型： 0：包年 1：包季 2：包月 3：按次 4：体验
                  </td>
                  <td>“producttype”:“0”</td>
                </tr>
                <tr>
                  <td>产品类别</td>
                  <td>productcat</td>
                  <td>
                    本字段在AXB业务中必须设置。 0： 保留。实际分配给AX(AC小号)
                    11：AXB 12: 语音验证业务 13：AXYB业务的XYB
                  </td>
                  <td>“productcat”:“11”</td>
                </tr>
                <tr>
                  <td>录音控制</td>
                  <td>callrecording</td>
                  <td>
                    可选。是否开通录音功能。在本字段不出现的情况下，默认0（不开通录音功能）。
                    0：不开通录音功能 1：开通录音功能
                  </td>
                  <td>“callrecording”:“0”</td>
                </tr>
                <tr>
                  <td>姓名</td>
                  <td>Name</td>
                  <td>必选</td>
                  <td>“name”:“张三”</td>
                </tr>
                <tr>
                  <td>证件类型</td>
                  <td>cardtype</td>
                  <td>必选</td>
                  <td>“cardtype”：“”</td>
                </tr>
                <tr>
                  <td>身份证号码</td>
                  <td>cardno</td>
                  <td>必选</td>
                  <td>“cardno”：“”</td>
                </tr>
              </table>
              <p>订购响应：</p>
              <table class="table">
                <th rowspan="9">消息头</th>
                <th>内容</th>
                <th>JSON对象名称</th>
                <th>说明</th>
                <th>举例</th>
                <tr>
                  <td>版本号</td>
                  <td>ver</td>
                  　 　
                </tr>
                <tr>
                  <td>消息ID</td>
                  <td>msgid</td>
                  　 　
                </tr>
                <tr>
                  <td>时间戳</td>
                  <td>ts</td>
                  　 　
                </tr>
                <tr>
                  <td>业务类型</td>
                  <td>service</td>
                  <td>acbss</td>
                  　
                </tr>
                <tr>
                  <td>消息类型</td>
                  <td>msgtype</td>
                  <td>axbsubrsp</td>
                  　
                </tr>
                <tr>
                  <td>签名</td>
                  <td>sid</td>
                  　
                </tr>
                <tr>
                  <td>保留字段</td>
                  <td>rsvd</td>
                  　 　
                </tr>
                <tr>
                  <td>应用标识</td>
                  <td>appkey</td>
                  <td>第三方应用的AppKey。可以为空，或者不出现。</td>
                </tr>
                <tr>
                  <td rowspan="3">消息体</td>
                  <td>返回码</td>
                  <td>result</td>
                  <td>采用类似http的状态码风格。 参考3.2 　</td>
                </tr>
                <tr>
                  <td>订购关系标识</td>
                  <td>subid</td>
                </tr>
                <tr>
                  <td>隐私号码</td>
                  <td>acms</td>
                </tr>
              </table>
              <h4>3.3.2 退订请求和响应</h4>
              <p>退订请求</p>
              <table class="table">
                <th rowspan="9">消息头</th>
                <th>内容</th>
                <th>JSON对象名称</th>
                <th>说明</th>
                <th>举例</th>
                <tr>
                  <td>版本号</td>
                  <td>ver</td>
                  　 　
                </tr>
                <tr>
                  <td>消息ID</td>
                  <td>msgid</td>
                  　 　
                </tr>
                <tr>
                  <td>时间戳</td>
                  <td>ts</td>
                  　 　
                </tr>
                <tr>
                  <td>业务类型</td>
                  <td>service</td>
                  <td>Acbss</td>
                  　
                </tr>
                <tr>
                  <td>消息类型</td>
                  <td>msgtype</td>
                  <td>Axbunsubreq</td>
                  　
                </tr>
                <tr>
                  <td>签名</td>
                  <td>sid</td>
                  　
                </tr>
                <tr>
                  <td>保留字段</td>
                  <td>rsvd</td>
                  　 　
                </tr>
                <tr>
                  <td>应用标识</td>
                  <td>appkey</td>
                  <td>第三方应用的AppKey。可以为空，或者不出现。</td>
                </tr>
                <tr>
                  <td rowspan="6">消息体</td>
                  <td>订购关系标识</td>
                  <td>subid</td>
                  <td></td>
                  　
                </tr>
                <tr>
                  <td>真实号码</td>
                  <td>prtms</td>
                  <td>对应AXB业务中的号码A</td>
                  　
                </tr>
                <tr>
                  <td>隐私号码</td>
                  <td>acms</td>
                  <td>对应AXB业务中的号码X</td>
                  　
                </tr>
                <tr>
                  <td>其他号码</td>
                  <td>otherms</td>
                  <td>AXB业务时必须设置。对应AXB业务中的号码B</td>
                </tr>
                <tr>
                  <td>产品类别</td>
                  <td>productcat</td>
                  <td>
                    AXB业务时必须设置。11：AXB12: 语音验证业务13：AXYB业务的XYB
                  </td>
                </tr>
                <td>退订时间</td>
                <td>unsubts</td>
                <td>格式为YYYYMMDDhhmmss。时间采用北京时间，24小时制。</td>
              </table>
              <p>退订响应：</p>
              <table class="table">
                <th rowspan="9">消息头</th>
                <th>内容</th>
                <th>JSON对象名称</th>
                <th>说明</th>
                <th>举例</th>
                <tr>
                  <td>版本号</td>
                  <td>ver</td>
                  　 　
                </tr>
                <tr>
                  <td>消息ID</td>
                  <td>msgid</td>
                  　 　
                </tr>
                <tr>
                  <td>时间戳</td>
                  <td>ts</td>
                  　 　
                </tr>
                <tr>
                  <td>业务类型</td>
                  <td>service</td>
                  <td>acbss</td>
                  　
                </tr>
                <tr>
                  <td>消息类型</td>
                  <td>msgtype</td>
                  <td>axbunsubrsp</td>
                  　
                </tr>
                <tr>
                  <td>签名</td>
                  <td>sid</td>
                  　
                </tr>
                <tr>
                  <td>保留字段</td>
                  <td>rsvd</td>
                  　 　
                </tr>
                <tr>
                  <td>应用标识</td>
                  <td>appkey</td>
                  <td>第三方应用的appKey。可以为空，或者不出现。</td>
                </tr>
                <tr>
                  <td rowspan="3">消息体</td>
                  <td>返回码</td>
                  <td>result</td>
                  <td>参见3.2“返回码定义”</td>
                  　
                </tr>
                <tr>
                  <td>订购关系标识</td>
                  <td>subid</td>
                  <td></td>
                  　
                </tr>
              </table>
              <h4>3.3.3 订购查询请求和响应</h4>
              <p>订购查询请求</p>
              <table class="table">
                <th rowspan="9">消息头</th>
                <th>内容</th>
                <th>JSON对象名称</th>
                <th>说明</th>
                <th>举例</th>
                <tr>
                  <td>版本号</td>
                  <td>ver</td>
                  　 　
                </tr>
                <tr>
                  <td>消息ID</td>
                  <td>msgid</td>
                  　 　
                </tr>
                <tr>
                  <td>时间戳</td>
                  <td>ts</td>
                  　 　
                </tr>
                <tr>
                  <td>业务类型</td>
                  <td>service</td>
                  <td>acbss</td>
                  　
                </tr>
                <tr>
                  <td>消息类型</td>
                  <td>msgtype</td>
                  <td>axbsubqryreq</td>
                  　
                </tr>
                <tr>
                  <td>签名</td>
                  <td>sid</td>
                  　
                </tr>
                <tr>
                  <td>保留字段</td>
                  <td>rsvd</td>
                  　 　
                </tr>
                <tr>
                  <td>应用标识</td>
                  <td>appkey</td>
                  <td>第三方应用的AppKey。可以为空，或者不出现。</td>
                </tr>
                <tr>
                  <td rowspan="5">消息体</td>
                  <td>订购关系标识</td>
                  <td>subid</td>
                  <td>方式一</td>
                  　
                </tr>
                <tr>
                  <td>被保护的真实号码</td>
                  <td>prtms</td>
                  <td>
                    方式二 注：otherms在AXB业务时可设置。对应AXB业务中的号码B。
                  </td>
                </tr>
                <tr>
                  <td>隐私号码</td>
                  <td>acms</td>
                </tr>
                <tr>
                  <td>其他号码</td>
                  <td>otherms</td>
                </tr>
              </table>
              <p>订购查询响应</p>
              <table class="table">
                <th rowspan="9">消息头</th>
                <th>内容</th>
                <th>JSON对象名称</th>
                <th>说明</th>
                <th>举例</th>
                <tr>
                  <td>版本号</td>
                  <td>ver</td>
                  　 　
                </tr>
                <tr>
                  <td>消息ID</td>
                  <td>msgid</td>
                  　 　
                </tr>
                <tr>
                  <td>时间戳</td>
                  <td>ts</td>
                  　 　
                </tr>
                <tr>
                  <td>业务类型</td>
                  <td>service</td>
                  <td>acbss</td>
                  　
                </tr>
                <tr>
                  <td>消息类型</td>
                  <td>msgtype</td>
                  <td>axbsubqryrsp</td>
                  　
                </tr>
                <tr>
                  <td>签名</td>
                  <td>sid</td>
                  　
                </tr>
                <tr>
                  <td>保留字段</td>
                  <td>rsvd</td>
                  　 　
                </tr>
                <tr>
                  <td>应用标识</td>
                  <td>appkey</td>
                  <td>第三方应用的AppKey。可以为空，或者不出现。</td>
                </tr>
                <tr>
                  <td rowspan="12">消息体</td>
                  <td>返回码</td>
                  <td>result</td>
                  <td>参见.3.2“返回码定义”</td>
                  　
                </tr>
                <tr>
                  <td>订购关系标识</td>
                  <td>subid</td>
                  　 　
                </tr>
                <tr>
                  <td>被保护的真实号码</td>
                  <td>prtms</td>
                  　
                </tr>
                <tr>
                  <td>隐私号码</td>
                  <td>acms</td>
                </tr>
                <tr>
                  <td>其他号码</td>
                  <td>otherms</td>
                </tr>
                <tr>
                  <td>订购时间</td>
                  <td>subts</td>
                </tr>
                <tr>
                  <td>订购产品类型</td>
                  <td>producttype</td>
                </tr>
                <tr>
                  <td>产品类别</td>
                  <td>productcat</td>
                </tr>
                <tr>
                  <td>录音控制</td>
                  <td>callrecording</td>
                  <td>
                    可选。是否开通录音功能。在本字段不出现的情况下，
                    <p>默认0（不开通录音功能）。</p>
                    <p>0：不开通录音功能</p>
                    <p>1：开通录音功能</p>
                  </td>
                  <td>“callrecording”:“0”</td>
                </tr>
                <tr>
                  <td>姓名</td>
                  <td>name</td>
                </tr>
                <tr>
                  <td>证件类型</td>
                  <td>cardtype</td>
                </tr>
                <tr>
                  <td>身份证号码</td>
                  <td>cardno</td>
                  <td></td>
                  <td>“cardno”：“”</td>
                </tr>
              </table>
              <h4>3.3.4 订购更新请求和响应</h4>
              <p>订购更新请求</p>
              <table class="table">
                <th rowspan="9">消息头</th>
                <th>内容</th>
                <th>JSON对象名称</th>
                <th>说明</th>
                <th>举例</th>
                <tr>
                  <td>版本号</td>
                  <td>ver</td>
                  　 　
                </tr>
                <tr>
                  <td>消息ID</td>
                  <td>msgid</td>
                  　
                </tr>
                <tr>
                  <td>时间戳</td>
                  <td>ts</td>
                  　 　
                </tr>
                <tr>
                  <td>业务类型</td>
                  <td>service</td>
                  <td>Acbss</td>
                  　
                </tr>
                <tr>
                  <td>消息类型</td>
                  <td>msgtype</td>
                  <td>Axbsubupdreq</td>
                  　
                </tr>
                <tr>
                  <td>签名</td>
                  <td>sid</td>
                  　
                </tr>
                <tr>
                  <td>保留字段</td>
                  <td>rsvd</td>
                  　 　
                </tr>
                <tr>
                  <td>应用标识</td>
                  <td>appkey</td>
                  <td>第三方应用的AppKey。AXB业务时必须设置，不能为空。</td>
                  <td>“appkey”:“kuaidadi”</td>
                </tr>
                <tr>
                  <td rowspan="11">消息体</td>
                  <td>订购关系标识</td>
                  <td>subid</td>
                  <td>
                    订购更新针对的现有订购关系的标识。必须与现有订购关系的内容一致。
                  </td>
                </tr>
                <tr>
                  <td>真实号码</td>
                  <td>prtms</td>
                  <td>
                    订购更新针对的现有订购关系的A号码。必须与现有订购关系的内容一致。
                  </td>
                </tr>
                <tr>
                  <td>隐私号码</td>
                  <td>acms</td>
                  <td>
                    订购更新针对的现有订购关系的X号码。必须与现有订购关系的内容一致。
                  </td>
                </tr>
                <tr>
                  <td>其他号码</td>
                  <td>otherms</td>
                  <td>变更后的新号码B。</td>
                  <td>“otherms”:“8613005711234”</td>
                </tr>
                <tr>
                  <td>更新时间</td>
                  <td>subts</td>
                  <td>格式为YYYYMMDDhhmmss。时间采用北京时间，24小时制。</td>
                  <td>“subts”:“20140728145921”</td>
                </tr>
                <tr>
                  <td>产品类别</td>
                  <td>productcat</td>
                  <td>
                    本字段在AXB业务中必须设置为11。AX业务不支持。0：保留。实际分配给AX(AC小号)11：AXB
                  </td>
                  <td>“productcat” :“11”</td>
                </tr>
              </table>
              <p>订购更新响应</p>
              <table class="table">
                <th rowspan="9">消息头</th>
                <th>内容</th>
                <th>JSON对象名称</th>
                <th>说明</th>
                <th>举例</th>
                <tr>
                  <td>版本号</td>
                  <td>ver</td>
                  　 　
                </tr>
                <tr>
                  <td>消息ID</td>
                  <td>msgid</td>
                  　
                </tr>
                <tr>
                  <td>时间戳</td>
                  <td>ts</td>
                  　 　
                </tr>
                <tr>
                  <td>业务类型</td>
                  <td>service</td>
                  <td>Acbss</td>
                  　
                </tr>
                <tr>
                  <td>消息类型</td>
                  <td>msgtype</td>
                  <td>Axbsubupdreq</td>
                  　
                </tr>
                <tr>
                  <td>签名</td>
                  <td>sid</td>
                  　
                </tr>
                <tr>
                  <td>保留字段</td>
                  <td>rsvd</td>
                  　 　
                </tr>
                <tr>
                  <td>应用标识</td>
                  <td>appkey</td>
                  <td>第三方应用的AppKey。可以为空，或者不出现。</td>
                </tr>
                <tr>
                  <td rowspan="3">消息体</td>
                  <td>返回码</td>
                  <td>result</td>
                  <td>采用类似http的状态码风格。参考返回码定义。</td>
                </tr>
                <tr>
                  <td>订购关系标识</td>
                  <td>subid</td>
                </tr>
              </table>
              <h4>3.3.5 外呼AXB转接配置设置请求和响应</h4>
              <p>外呼AXB转接配置设置请求</p>
              <table class="table">
                <th rowspan="9">消息头</th>
                <th>内容</th>
                <th>JSON对象名称</th>
                <th>说明</th>
                <th>举例</th>
                <tr>
                  <td>版本号</td>
                  <td>ver</td>
                  　 　
                </tr>
                <tr>
                  <td>消息ID</td>
                  <td>msgid</td>
                  　
                </tr>
                <tr>
                  <td>时间戳</td>
                  <td>ts</td>
                  　 　
                </tr>
                <tr>
                  <td>业务类型</td>
                  <td>service</td>
                  <td>Acbss</td>
                  　
                </tr>
                <tr>
                  <td>消息类型</td>
                  <td>msgtype</td>
                  <td>Axbsubupdreq</td>
                  　
                </tr>
                <tr>
                  <td>签名</td>
                  <td>sid</td>
                  　
                </tr>
                <tr>
                  <td>保留字段</td>
                  <td>rsvd</td>
                </tr>
                <tr>
                  <td>应用标识</td>
                  <td>appkey</td>
                  <td>第三方应用的AppKey。可以为空，或者不出现。</td>
                </tr>
                <tr>
                  <td rowspan="3">消息体</td>
                  <td>隐私号码</td>
                  <td>acms</td>
                  <td>X号码</td>
                </tr>
                <tr>
                  <td>转接号码</td>
                  <td>transferms</td>
                  <td>转接号码</td>
                </tr>
                <tr>
                  <td>转接号码设置放音编码</td>
                  <td>transfervoicecode</td>
                  <td>设置转接号码的放音编码</td>
                </tr>
              </table>
              <p>外呼AXB转接配置设置响应</p>
              <table class="table">
                <th rowspan="9">消息头</th>
                <th>内容</th>
                <th>JSON对象名称</th>
                <th>说明</th>
                <th>举例</th>
                <tr>
                  <td>版本号</td>
                  <td>ver</td>
                </tr>
                <tr>
                  <td>消息ID</td>
                  <td>msgid</td>
                </tr>
                <tr>
                  <td>时间戳</td>
                  <td>ts</td>
                </tr>
                <tr>
                  <td>业务类型</td>
                  <td>service</td>
                  <td>Acbss</td>
                </tr>
                <tr>
                  <td>消息类型</td>
                  <td>msgtype</td>
                  <td>outaxbtransfersetrsp</td>
                </tr>
                <tr>
                  <td>签名</td>
                  <td>sid</td>
                </tr>
                <tr>
                  <td>保留字段</td>
                  <td>rsvd</td>
                </tr>
                <tr>
                  <td>应用标识</td>
                  <td>appkey</td>
                  <td>第三方应用的AppKey。可以为空，或者不出现。</td>
                </tr>
                <tr>
                  <td>消息体</td>
                  <td>返回码</td>
                  <td>result</td>
                  <td>参见3.2“返回码定义”</td>
                  　
                </tr>
              </table>
              <h4>3.3.6 外呼AXB转接配置删除请求和响应</h4>
              <p>外呼AXB转接配置删除请求</p>
              <table class="table">
                <th rowspan="9">消息头</th>
                <th>内容</th>
                <th>JSON对象名称</th>
                <th>说明</th>
                <th>举例</th>
                <tr>
                  <td>版本号</td>
                  <td>ver</td>
                </tr>
                <tr>
                  <td>消息ID</td>
                  <td>msgid</td>
                </tr>
                <tr>
                  <td>时间戳</td>
                  <td>ts</td>
                </tr>
                <tr>
                  <td>业务类型</td>
                  <td>service</td>
                  <td>Acbss</td>
                </tr>
                <tr>
                  <td>消息类型</td>
                  <td>msgtype</td>
                  <td>outaxbtransfersetrsp</td>
                </tr>
                <tr>
                  <td>签名</td>
                  <td>sid</td>
                </tr>
                <tr>
                  <td>保留字段</td>
                  <td>rsvd</td>
                </tr>
                <tr>
                  <td>应用标识</td>
                  <td>appkey</td>
                  <td>第三方应用的AppKey。可以为空，或者不出现。</td>
                </tr>
                <tr>
                  <td>消息体</td>
                  <td>隐私号码</td>
                  <td>acms</td>
                  <td>X号码</td>
                </tr>
              </table>
              <p>外呼AXB转接配置删除响应</p>
              <table class="table">
                <th rowspan="9">消息头</th>
                <th>内容</th>
                <th>JSON对象名称</th>
                <th>说明</th>
                <th>举例</th>
                <tr>
                  <td>版本号</td>
                  <td>ver</td>
                </tr>
                <tr>
                  <td>消息ID</td>
                  <td>msgid</td>
                </tr>
                <tr>
                  <td>时间戳</td>
                  <td>ts</td>
                </tr>
                <tr>
                  <td>业务类型</td>
                  <td>service</td>
                  <td>Acbss</td>
                </tr>
                <tr>
                  <td>消息类型</td>
                  <td>msgtype</td>
                  <td>outaxbtransfersetrsp</td>
                </tr>
                <tr>
                  <td>签名</td>
                  <td>sid</td>
                </tr>
                <tr>
                  <td>保留字段</td>
                  <td>rsvd</td>
                </tr>
                <tr>
                  <td>应用标识</td>
                  <td>appkey</td>
                  <td>第三方应用的AppKey。可以为空，或者不出现。</td>
                </tr>
                <tr>
                  <td>消息体</td>
                  <td>返回码</td>
                  <td>result</td>
                  <td>参见3.2“返回码定义”</td>
                </tr>
              </table>
            </div>
            <div id="ACI-Return-definition">
              <h3>4. 返回码定义</h3>
              <p>
                IP系统应该检查响应消息中的“返回码”。如果结果不是成功，则IP系统需要针对不同返回码进行处理。
              </p>
              <p>2XX 成功类返回码</p>
              <table class="table">
                <th>返回码</th>
                <th>描述</th>
                <th>定义</th>
                <tr>
                  <td>200</td>
                  <td>成功</td>
                  <td>请求报文成功被处理</td>
                </tr>
                <tr>
                  <td>其他</td>
                  <td>待定义</td>
                  <td></td>
                </tr>
              </table>
              <p>4XX 客户端错误类返回码</p>
              <table class="table">
                <th>返回码</th>
                <th>描述</th>
                <th>定义</th>
                <tr>
                  <td>400</td>
                  <td>请求报文语法错误</td>
                  <td>
                    请求报文所携带的字段，不符合接口定义。比如producttype的值不在定义范围内。AC系统需要检查字段的有效取值。
                  </td>
                </tr>
                <tr>
                  <td>401</td>
                  <td>认证未通过</td>
                  <td>请求的来源或者请求的签名未通过校验。</td>
                </tr>
                <tr>
                  <td>402</td>
                  <td>隐私号码已经使用</td>
                  <td>请求中要求绑定的隐私号码已经被分配给其他用户。</td>
                </tr>
                <tr>
                  <td>403</td>
                  <td>订购关系不存在</td>
                  <td>
                    系统提交的请求中提供的“订购关系标识”，在互联网系统中不存在。
                  </td>
                </tr>
                <tr>
                  <td>404</td>
                  <td>绑定数据不一致</td>
                  <td>
                    请求中提供的“订购关系标识”在AC系统中查询获得的“真实号码”和“隐私号码”绑定关系，与请求中提供的“真实号码”与“隐私号码”不一致。
                  </td>
                </tr>
                <tr>
                  <td>429</td>
                  <td>请求过多</td>
                  <td>
                    AC系统在一定时间内提交了过多的请求。AC系统在访问某些特定服务接口时，可能会出现该错误。
                  </td>
                </tr>
                <tr>
                  <td>其他</td>
                  <td>待定义</td>
                  <td></td>
                </tr>
              </table>
              <p>5XX 服务端错误类返回码</p>
              <table class="table">
                <th>返回码</th>
                <th>描述</th>
                <th>定义</th>
                <tr>
                  <td>501</td>
                  <td>业务处理超时</td>
                  <td>
                    互联网系统内部处理引起的超时。AC系统可以尝试重新提交请求。
                  </td>
                </tr>
                <tr>
                  <td>502</td>
                  <td>服务暂时不可用</td>
                  <td>
                    互联网系统当前不可用，可能是因为系统负载过重，或者暂时停机。
                  </td>
                </tr>
                <tr>
                  <td>503</td>
                  <td>服务接口被禁止</td>
                  <td>
                    互联网系统已经关闭相关服务。后续对于该服务的请求是被禁止的。
                  </td>
                </tr>
                <tr>
                  <td>其他</td>
                  <td>待定义</td>
                  <td></td>
                </tr>
              </table>
            </div>
            <div id="ACI-attach">
              <h3>5. 附:签名算法</h3>
              <h4>5.1 JAVA</h4>
              <img
                src="../assets/images/java_attach_demo.png"
                width="1030"
                alt="java代码示例图"
              />
              <h4>5.2 PHP</h4>
              <pre data-language="php">
                           public static function sign($params)
                                    {
                                        unset($params['sid']);
                                        unset($params['sign']);
                                        //按照key进行排序
                                        ksort($params);

                                        $signParams = [];
                                        foreach ($params as $key => $val) {
                                            $signParams[] = $key . $val;
                                        }
                                        $signParams = self::APP_SECRET . implode('', $signParams);
                                        $sign = strtoupper(md5($signParams));
                                        return $sign;
                                    } 
                       </pre
              >
            </div>
          </div>
          <!-- ACI接口协议_dom_结束 -->
          <!-- USSD接口文档说明_dom_开始 -->
          <div class="ussdInterface-dom">
            <div id="Interface-profile">
              <h3>使用说明</h3>
              <p>
                本文档提供了USSD(彩印)平台业务相关的API，提供接口的相关说明，以指导相关人员进行业务接入。
              </p>
              <p>
                号外号USSD平台我们简称HUP(Haowaihao USSD
                Platform)平台，前端客户我们简称CP（Customer Platform）
              </p>
              <h3>1.接口简介</h3>
              <h4>1.1.协议说明</h4>
              <p>接口采用HTTP协议，发送响应的数据格式采用JSON格式。</p>
              <h4>1.2.USSD通信模型</h4>
              <img
                src="../assets/images/USSD_communication_model_diagram.png"
                alt="USSD通信模型图"
              />
              <h4>1.3.安全认证</h4>
              <p>采用数字签名模式进行报文传输</p>
              <p>生成数字签名算法如下：</p>
              <ol>
                <li>Ts参数使用utc标准时间, ISO8601格式.</li>
                <li>
                  请求报文各字段以参数名首字母为序（a-z）排列，参数名参数值以等号=连接，不同参数以逗号,连接。
                </li>
                <li>使用分配的appsecret追加到上面字段的尾部</li>
                <li>sign参数本身不参与签名</li>
                <li>sign参数本身不参与签名</li>
                <li>使用base64算法转换签名</li>
              </ol>
              <p>说明：</p>
              <ol>
                <li>全部使用utf8编码解码</li>
                <li>
                  Nonce为随机字符串，长度无限制
                  <p>实例：</p>
                </li>
              </ol>
              <pre>
                            msg = 
                                { 'appkey': 'appkey',
                                'ts': '1471857427',
                                'ms': '13810326774', 
                                'tid': '1',
                                'nonce': '?c3^4#5UT~s_HQ>eCzpU',
                                'sign':'',
                                'argv': ['号外号','中秋节']
                                }
                        </pre
              >
              <p>
                参与数字签名的字符串为,(appkey=appkey,
                appsecret=appid)：data:appkey=appkey,argv=['号外号','中秋节'],ms=13810326774,nonce=C>}I#_^TraMabWX%_8Nt,tid=1,ts=1471857427appid
              </p>
              <p>生成包含签名的最终报文如下：</p>
              <pre>
                            {'nonce': 'C>}I#_^TraMabWX%_8Nt', 
                                'ts': 1471857427, 
                                'ms': '13810326774', 
                                'appkey': 'appkey', 
                                'argv': ['号外号', '中秋节'], 
                                'tid': '1', 
                                'sign': 'ZMd3hXIG+DBV0siBqHE9VGDyShyGFeyY6bWCVlmCbbg='
                                }
                        </pre
              >
              <p class="Remarks">
                注：appkey 和appsecret 是由号外号USSD平台统一分配的。
              </p>
              <h4>1.4.HTTP请求方式</h4>
              <pre>post方式</pre>
              <h4>1.5.HTTP头</h4>
              <pre>
                            Accept :application/json;charset=UTF-8
                            Content-Type:application/json;charset=UTF-8
                        </pre
              >
              <h4>1.6.状态码</h4>
              <table class="table">
                <th>响应码</th>
                <th>描述</th>
                <th>说明</th>
                <tr>
                  <td>00000000</td>
                  <td>Success</td>
                  <td>成功</td>
                </tr>
                <tr>
                  <td>10000001</td>
                  <td>System Error</td>
                  <td>系统错误</td>
                </tr>
                <tr>
                  <td>20000001</td>
                  <td>URI is Unknown</td>
                  <td>URI错误</td>
                </tr>
                <tr>
                  <td>20000002</td>
                  <td>There is no appkey</td>
                  <td>无APPKEY</td>
                </tr>
                <tr>
                  <td>20000003</td>
                  <td>APP not allow to use this api</td>
                  <td>APP无权调用此API</td>
                </tr>
                <tr>
                  <td>20000004</td>
                  <td>API resource not enough</td>
                  <td>API资源不足</td>
                </tr>
                <tr>
                  <td>20000005</td>
                  <td>apiname is nil</td>
                  <td>APINAME为空</td>
                </tr>
                <tr>
                  <td>30001001</td>
                  <td>Argument Error: invalid src</td>
                  <td>src参数不合法</td>
                </tr>
                <tr>
                  <td>30001002</td>
                  <td>Argument Error: invalid dst</td>
                  <td>dst参数不合法</td>
                </tr>
                <tr>
                  <td>30001003</td>
                  <td>Argument Error: invalid template</td>
                  <td>template参数不合法</td>
                </tr>
                <tr>
                  <td>30001004</td>
                  <td>Argument Error: invalid argv</td>
                  <td>argv参数不合法</td>
                </tr>
                <tr>
                  <td>30001005</td>
                  <td>Argument Error: include sensitiveword</td>
                  <td>存在敏感词</td>
                </tr>
                <tr>
                  <td>30001006</td>
                  <td>Argument Error: invalid batchmsg</td>
                  <td>batchmsg参数不合法</td>
                </tr>
                <tr>
                  <td>30001007</td>
                  <td>Argument Error: batchmsg exceed the limit</td>
                  <td>batchmsg消息个数超过限制</td>
                </tr>
                <tr>
                  <td>30002001</td>
                  <td>Server Error: cy server timeout</td>
                  <td>彩印服务器响应超时</td>
                </tr>
                <tr>
                  <td>30002002</td>
                  <td>Server Error: cy server return err</td>
                  <td>彩印服务器返回错误</td>
                </tr>
                <tr>
                  <td>30002003</td>
                  <td>Server Error: cy server response body is nil</td>
                  <td>彩印服务器响应体为空</td>
                </tr>
                <tr>
                  <td>30002004</td>
                  <td>Server Error: cy server response body is not json</td>
                  <td>彩印服务器响应体不合法</td>
                </tr>
                <tr>
                  <td>30002005</td>
                  <td>Server Error: cy server response status error</td>
                  <td>彩印服务器响应体状态错误</td>
                </tr>
              </table>
            </div>
            <div id="Single-ussd-delivery">
              <h3>2.单条USSD投递</h3>
              <h4>2.1 URL</h4>
              <p>https://host:port/ussd/single</p>
              <p>host和port由HUP平台提供</p>
              <h4>2.2 请求参数</h4>
              <table class="table">
                <th>字段值</th>
                <th>字段类型</th>
                <th>说明</th>
                <tr>
                  <td>appkey</td>
                  <td>string</td>
                  <td>第三方应用ID</td>
                </tr>
                <tr>
                  <td>ts</td>
                  <td>string</td>
                  <td>
                    时间戳（从格林威治时间1970年01月01日00时00分00秒起至现在的总秒数，精确到秒，与标准时间偏差5分钟之内）
                  </td>
                </tr>
                <tr>
                  <td>sign</td>
                  <td>string</td>
                  <td>服务器签名（详见安全认证）</td>
                </tr>
                <tr>
                  <td>ms</td>
                  <td>string</td>
                  <td>手机号码，目前支持中国移动和中国联通的手机号码</td>
                </tr>
                <tr>
                  <td>tid</td>
                  <td>string</td>
                  <td>
                    模板编号，用户在服务端设置的模板，需要审核通过以后才能使用
                  </td>
                </tr>
                <tr>
                  <td>argv</td>
                  <td>array [string]</td>
                  <td>模板中需要填充的参数</td>
                </tr>
              </table>
              <p>举例：</p>
              <pre>
                            msg = 
                                { 'appkey': 'appkey',
                                'ts': '1471857427',
                                'ms': '13810326774', 
                                'tid': '1',
                                'nonce': '?c3^4#5UT~s_HQ>eCzpU',
                                'sign':'',
                                'argv': ['号外号','中秋节']
                                }
                        </pre
              >
              <h4>2.3.响应参数</h4>
              <table class="table">
                <th>字段值</th>
                <th>字段类型</th>
                <th>说明</th>
                <tr>
                  <td>code</td>
                  <td>string</td>
                  <td>返回码（详见响应码）</td>
                </tr>
                <tr>
                  <td>ds</td>
                  <td>string</td>
                  <td>描述信息（详见响应码）</td>
                </tr>
                <tr>
                  <td>msgid</td>
                  <td>string</td>
                  <td>为消息生成的唯一ID</td>
                </tr>
                <tr>
                  <td>ms</td>
                  <td>string</td>
                  <td>目标号码，与请求中的ms一致</td>
                </tr>
              </table>
              <p>举例：</p>
              <pre>
                            {
                            "code": "00000000",
                            "ds": "Success",
                            "msgid": "1458540307123456",
                            "ms": "13810326774"
                            }
                        </pre
              >
              <h4>2.4.注意事项</h4>
              <p>模板：</p>
              <p class="Remarks">
                模板中必须携带公司名称，其在模板中的位置不限。
              </p>
              <table class="table">
                <th>编号</th>
                <th>内容（#*#部分为参数替换处）</th>
                <th>可变参数个数</th>
                <tr>
                  <td>1</td>
                  <td>
                    【支付宝】你的支付宝发生#*#元的交易，校验码：#*#打死都不能告诉别人哦！唯一热线95188
                  </td>
                  <td>2</td>
                </tr>
              </table>
            </div>
            <div id="USSD-Delivery-Status-Notification">
              <h3>3.USSD投递状态通知</h3>
              <h4>3.1.URL</h4>
              <p>https://userhost:userport/ussd/status</p>
              <p class="Remarks">
                注：userhost和userport由客户提供，如果未提供，不触发本过程
              </p>
              <h4>3.2.推送参数</h4>
              <table class="table">
                <th>字段值</th>
                <th>字段类型</th>
                <th>说明</th>
                <tr>
                  <td>appkey</td>
                  <td>string</td>
                  <td>第三方应用ID</td>
                </tr>
                <tr>
                  <td>ts</td>
                  <td>string</td>
                  <td>时间戳（2.2）</td>
                </tr>
                <tr>
                  <td>sign</td>
                  <td>string</td>
                  <td>服务器签名（安全认证）</td>
                </tr>
                <tr>
                  <td>msgid</td>
                  <td>string</td>
                  <td>为消息生成的唯一任务ID</td>
                </tr>
                <tr>
                  <td>code</td>
                  <td>string</td>
                  <td>投递状态码（详见1.6）</td>
                </tr>
                <tr>
                  <td>ds</td>
                  <td>string</td>
                  <td>描述信息（详见1.6）</td>
                </tr>
              </table>
              <pre>
                            {
                            "appkey": "appkey",
                            "ts": "1408103878424" , 
                            "sign":"7eba379599053ee5" ,
                            "msgid": "1458540307123456",
                            "code": "00000000",
                            "ds: "Success"
                            }
                        </pre
              >
              <h4>3.3.响应参数</h4>
              <table class="table">
                <th>字段值</th>
                <th>字段类型</th>
                <th>说明</th>
                <tr>
                  <td>code</td>
                  <td>string</td>
                  <td>返回码（详见响应码），总返回码</td>
                </tr>
                <tr>
                  <td>ds</td>
                  <td>string</td>
                  <td>描述信息（详见响应码）</td>
                </tr>
              </table>
              <p>举例</p>
              <pre>
                            {
                            "code": "00000000",
                            "ds": "Success"
                            }
                        </pre
              >
            </div>
          </div>
          <!-- USSD接口文档说明_dom_结束 -->
          <!-- USSD群发接口文档_dom_开始 -->
          <div class="ussdMass-dom">
            <div id="ussdMass-Interface-profile">
              <h3>使用说明</h3>
              <p>
                本文档提供了USSD平台群发业务相关的API，提供接口的相关说明，以指导相关人员进行业务接入。
              </p>
              <p>
                号外号USSD平台我们简称HUP(Haowaihao USSD
                Platform)平台，前端客户我们简称CP（Customer Platform）
              </p>
              <h3>1.接口简介</h3>
              <h4>1.1.协议说明</h4>
              <p>接口采用HTTP协议，发送响应的数据格式采用JSON格式。</p>
              <h4>1.2.USSD通信模型</h4>
              <img
                src="../assets/images/USSD_Mass_communication_model.png"
                alt="USSD通信模型图"
              />
              <p>说明：</p>
              <ul>
                <li>
                  正常情况下，子批次完成后会通过“子批次投递结果通知”告知管理平台。
                </li>
                <li>
                  在异常情况下，“子批次投递结果通知”未能送达管理平台，需先通过“查询已完成子批次”接口，确认已完成的批次，再通过“查询子批次投递结果”（只提供已完成子批次查询）接口获取详细信息下载地址。
                </li>
                <li>
                  在异常情况下，“投递结束通知”未能送达管理平台，可通过“查询批量群发任务”接口确认任务完成情况。
                </li>
                <p>
                  “查询已完成子批次”、“查询批量群发任务”、“查询子批次投递结果”查询接口在任务开始至任务完成后一定期限内有效。
                </p>
              </ul>
            </div>
            <div id="ussdMass-Create-batch-tasks">
              <h3>2. 创建批量群发任务</h3>
              <h4>2.1.URL</h4>
              <p>https://host:port/ussd/batch_task</p>
              <p>host和port由HUP平台提供</p>
              <h4>2.2.HTTP请求方式</h4>
              <p>POST</p>
              <h4>2.3.HTTP头</h4>
              <p>
                Accept :application/json;charset=UTF-8
                Content-Type:application/json;charset=UTF-8 Authorization:
                USSDAUTH appkey="350000100020003", timestamp="1408103878424",
                signature="7eba379599053ee5"appkey第三方应用ID（批量请求消息发起方）；timestamp时间戳（详见请求签名）；signature服务器签名（详见授权说明）
              </p>
              <h4>2.4.请求参数</h4>
              <table class="table">
                <th>字段值</th>
                <th>字段类型</th>
                <th>必选</th>
                <th>说明</th>
                <tr>
                  <td>appkey</td>
                  <td>string</td>
                  <td>M</td>
                  <td>第三方应用ID</td>
                </tr>
                <tr>
                  <td>cid</td>
                  <td>string</td>
                  <td>M</td>
                  <td>回填企业开户分配的企业标识</td>
                </tr>
                <tr>
                  <td>cappkey</td>
                  <td>string</td>
                  <td>M</td>
                  <td>回填企业开户分配的appkey</td>
                </tr>
                <tr>
                  <td>tid</td>
                  <td>string</td>
                  <td>M</td>
                  <td>
                    模板编号，模板必须为群发专用模板，审核通过之后，才能使用
                  </td>
                </tr>
                <tr>
                  <td>argv</td>
                  <td>array [string]</td>
                  <td>M</td>
                  <td>模板中需要填充的参数，参数内容为UTF-8编码</td>
                </tr>
                <tr>
                  <td>tn</td>
                  <td>string</td>
                  <td>M</td>
                  <td>投递号码总数</td>
                </tr>
              </table>
              <p>举例:</p>
              <pre>
                            {
                                "appkey": "350000100020003",
                                "cid": "2222ca5f003645a4af9517fd098b23191",
                                "tid": "1",
                                "argv": [
                                                "号外号",
                                                "中秋节"
                                        ]
                                "tn":"2000000"
                            }
                        </pre
              >
              <h4>2.5.响应参数</h4>
              <table class="table">
                <th>字段值</th>
                <th>字段类型</th>
                <th>必选</th>
                <th>说明</th>
                <tr>
                  <td>code</td>
                  <td>string</td>
                  <td>M</td>
                  <td>返回码（详见响应码），</td>
                </tr>
                <tr>
                  <td>ds</td>
                  <td>string</td>
                  <td>M</td>
                  <td>描述信息（详见响应码）</td>
                </tr>
                <tr>
                  <td>taskid</td>
                  <td>string</td>
                  <td>M</td>
                  <td>服务端为此次任务生成的唯一任务ID</td>
                </tr>
              </table>
              <p>举例：</p>
              <pre>
                            {
                            "code": "00000000",
                            "ds": "Success",
                            "taskid": "1458540307123456"
                            }
                        </pre
              >
            </div>
            <div id="ussdMass-Upload-number">
              <h3>3.上传群发号码</h3>
              <h4>3.1.URL</h4>
              <p>https://host:port/ussd/batch_number?taskid=XXX</p>
              <p>host和port由HUP平台提供</p>
              <h4>3.2.HTTP请求方式</h4>
              <p>POST</p>
              <h4>3.3. HTTP Headers</h4>
              <pre>
Accept :application/json;charset=UTF-8
                            Content-Type:application/json;charset=UTF-8
                            Content-Encoding:gzip
                            Authorization: USSDAUTH appkey="350000100020003", 
                            timestamp="1408103878424", signature="7eba379599053ee5"
                        </pre
              >
              <p>
                appkey第三方应用ID（批量请求消息发起方）；timestamp时间戳（详见请求签名）；signature服务器签名（详见授权说明）
              </p>
              <h4>3.4.推送参数</h4>
              <table class="table">
                <th>字段值</th>
                <th>字段类型</th>
                <th>说明</th>
                <tr>
                  <td>appkey</td>
                  <td>string</td>
                  <td>第三方应用ID</td>
                </tr>
                <tr>
                  <td>ts</td>
                  <td>string</td>
                  <td>时间戳（2.2）</td>
                </tr>
                <tr>
                  <td>sign</td>
                  <td>string</td>
                  <td>服务器签名（安全认证）</td>
                </tr>
                <tr>
                  <td>msgid</td>
                  <td>string</td>
                  <td>为消息生成的唯一任务ID</td>
                </tr>
                <tr>
                  <td>code</td>
                  <td>string</td>
                  <td>投递状态码（详见1.6）</td>
                </tr>
                <tr>
                  <td>ds</td>
                  <td>string</td>
                  <td>描述信息（详见1.6）</td>
                </tr>
              </table>
              <pre>
                            {
                                "appkey": "appkey",
                                "ts": "1408103878424" , 
                                "sign":"7eba379599053ee5" ,
                                "msgid": "1458540307123456",
                                "code": "00000000",
                                "ds: "Success"
                            }
                        </pre
              >
              <h4>3.5.响应参数</h4>
              <table class="table">
                <th>字段值</th>
                <th>字段类型</th>
                <th>说明</th>
                <tr>
                  <td>code</td>
                  <td>string</td>
                  <td>返回码（详见响应码），总返回码</td>
                </tr>
                <tr>
                  <td>ds</td>
                  <td>string</td>
                  <td>描述信息（详见响应码）</td>
                </tr>
              </table>
              <p>举例：</p>
              <pre>
                        {
                        "code": "00000000",
                        "ds": "Success"
                        }</pre
              >
            </div>
            <br />
          </div>
          <!-- USSD群发接口文档_dom_结束 -->
          <!-- 短信接口说明_dom_开始 -->
          <div class="smsInterface-dom">
            <div id="smsInterface-Interface-profile">
              <h3>使用说明</h3>
              <p>
                本文档提供了短信平台业务相关的API，提供接口的相关说明，以指导相关人员进行业务接入。
              </p>
              <p>
                号外号短信平台我们简称SMP(Short Message
                Platform)平台，前端客户我们简称CP（Customer Platform）。
              </p>
              <h3>1.接口简介</h3>
              <h4>1.1.协议说明</h4>
              <p>接口采用HTTP协议，发送响应的数据格式采用JSON格式。</p>
              <h4>1.2.通信模型</h4>
              <img src="" alt="通信模型图" />
              <h4>1.3.安全认证</h4>
              <p>采用数字签名模式进行报文传输</p>
              <p>生成数字签名算法如下：</p>
              <ol>
                <li>Ts参数使用utc标准时间, ISO8601格式.</li>
                <li>
                  请求报文各字段以参数名首字母为序（a-z）排列，参数名参数值以等号=连接，不同参数以逗号,连接。
                </li>
                <li>使用分配的appsecret追加到上面字段的尾部</li>
                <li>sign参数本身不参与签名</li>
                <li>使用SHA256算法生成签名</li>
                <li>使用base64算法转换签名</li>
              </ol>
              <p>说明：</p>
              <ol>
                <li>全部使用utf8编码解码</li>
                <li>Nonce为随机字符串，长度无限制</li>
              </ol>
              <p>实例：</p>
              <pre>
                            msg = { 
                                    'ms': '8613000110022', 
                                    'appkey': 'appkey', 
                                    'nonce': '?c3^4#5UT~s_HQ>eCzpU',
                                    'vp': '900',
                                    'ts': '2016-07-15T02:09:00.164515+00:00'
                                  }
                        </pre
              >
              <p>
                参与数字签名的字符串为,
                (appkey=appkey,appsecret=appid)：appkey=appkey,ms=8613000110022,nonce=?c3^4#5UT~s_HQeCzpU,
                ts=2016-07-15T02:09:00.164515+00:00,vp=900appid
              </p>
              <p>生成包含签名的最终报文如下：</p>
              <pre>
                            {
                                'sign': 'XFVI/aLjuWrFNxEENdPdoFeWipwgFBnz7TAu29yNEsA=',
                                'ms': '8613000110022', 
                                'appkey': 'appkey', 
                                'nonce': '?c3^4#5UT~s_HQ>eCzpU',
                                'vp': '900', 
                                'ts': '2016-07-15T02:09:00.164515+00:00'
                            }
                        </pre
              >
              <p>注：appkey 和appsecret 是由号外号短信平台统一分配的。</p>
              <h4>1.4.HTTP 状态码</h4>
              <p>POST 方法</p>
              <ul>
                <li>200 OK：成功。</li>
                <li>通用状态码:</li>
                <li>500 SERVER ERROR：服务器内部错误。</li>
                <li>471: 无此appkey</li>
                <li>472: 缺少必要的键（字段）</li>
                <li>473: 数字签名校验失败</li>
                <li>474: 短信剩余条数不足</li>
                <li>475: 校验码超出有效期</li>
                <li>476: 校验码错误</li>
                <li>477: 消息格式错误</li>
                <li>478: 短信发送失败</li>
                <li>479: 推送信息失败</li>
              </ul>
            </div>
            <div id="smsInterface-SMS-verification-code-interface">
              <h3>2.获取短信验证码接口</h3>
              <h4>2.1.接口功能</h4>
              <p>
                当CP平台用户发送验证请求时，SMSP后台会向CP平台请求指定的手机号发送一个短信验证码，同时返回给CP平台一个短信验证码的id。
              </p>
              <h4>2.2.请求方法</h4>
              <p>请设置成”POST”</p>
              <h4>2.3.Url</h4>
              <p>http://{serverroot}/gsms</p>
              <h4>2.4.请求消息</h4>
              <p>请求消息体中的参数（约定全部为小写字母）说明如下表所示。</p>
              <p>表1-1请求消息体参数说明</p>
              <table class="table">
                <th>json键名</th>
                <th>内容</th>
                <th>最大长度</th>
                <th>可选</th>
                <th>说明</th>
                <tr>
                  <td>appkey</td>
                  <td>应用标识</td>
                  <td>8</td>
                  <td>必须</td>
                  <td>应用商户的接入”appkey”:”jsyh”</td>
                </tr>
                <tr>
                  <td>tid</td>
                  <td>模板id</td>
                  <td>16</td>
                  <td>必须</td>
                  <td>模板id ”tid”:”1073001”</td>
                </tr>
                <tr>
                  <td>ms</td>
                  <td>手机号</td>
                  <td>15</td>
                  <td>必须</td>
                  <td>
                    接收用户号码，号码格式遵循国际电信联盟定义的E.164
                    标准。即含国家码的手机号，例如：”ms”：”8613000110022”
                  </td>
                </tr>
                <tr>
                  <td>ts</td>
                  <td>发送消息的时间戳</td>
                  <td>32</td>
                  <td></td>
                  <td>
                    短信验证码发送事件发生的时间戳，“ts”:“ 20160713114223039684”
                  </td>
                </tr>
                <tr>
                  <td>vp</td>
                  <td>短信验证码有效周期</td>
                  <td>32</td>
                  <td></td>
                  <td>
                    验证码有效期，在有效期内验证码有效，否则无效，用户重新发送请求验证码，单位秒。”vp”:”900”，默认60
                  </td>
                </tr>
                <tr>
                  <td>sign</td>
                  <td>签名</td>
                  <td>64</td>
                  <td>必须</td>
                  <td>参考1.3</td>
                </tr>
              </table>
              <p>注意：ms手机号目前只支持86中国手机号码</p>
              <p>请求消息示例如下：</p>
              <pre>
                            {
                                "appkey":"jsyh",
                                "tid":"1073001", 
                                "ms":"8613000110022",
                                "ts":"20160713101356320",
                                "vp":"900",
                                "sign":"1D731A07A180EC56C66451706FBE4AFF"
                            }
                        </pre
              >
              <h4>2.4.1.响应消息</h4>
              <p>表1-2响应消息参数说明</p>
              <table class="table">
                <th>json键名</th>
                <th>内容</th>
                <th>最大长度</th>
                <th>说明</th>
                <tr>
                  <td>vid</td>
                  <td>验证码ID，可选</td>
                  <td>16</td>
                  <td>短信验证码id，用于校验</td>
                </tr>
                <tr>
                  <td>msg</td>
                  <td>String</td>
                  <td>128</td>
                  <td>返回结果的详细描述信息</td>
                </tr>
                <tr>
                  <td>msgid</td>
                  <td>string</td>
                  <td>26</td>
                  <td>消息id</td>
                </tr>
              </table>
              <p>响应消息示例：</p>
              <pre>
                            {
                                "vid": "1", 
                                "msg": "success"，
                                "msgid":"16080512365800001521667374"
                            }
                        </pre
              >
            </div>
            <div id="smsInterface-check-SMS-verification-code-interface">
              <h3>3. 校验短信验证码接口</h3>
              <h4>3.1.功能</h4>
              <p>
                当CP平台用户发送验证请求时，SMSP后台会向CP平台请求指定的手机号发送一个短信验证码，同时返回给CP平台一个短信验证码的id。CP平台使用此id校验CP平台用户的校验码是否正确。
              </p>
              <h4>3.2. 请求方法</h4>
              <p>请设置成“POST”。</p>
              <h4>3.3. Url</h4>
              <p>http://{serverroot}/vsms</p>
              <h4>3.4. 请求消息</h4>
              <p>请求消息体中的参数（约定全部为小写字母）说明如下表所示。</p>
              <table class="table">
                <th>json键名</th>
                <th>内容</th>
                <th>最大长度</th>
                <th>可选</th>
                <th>说明</th>
                <tr>
                  <td>appkey</td>
                  <td>应用标识</td>
                  <td>8</td>
                  <td>必须</td>
                  <td>应用商户的接入”appkey”:”jsyh”</td>
                </tr>
                <tr>
                  <td>ms</td>
                  <td>手机号</td>
                  <td>15</td>
                  <td>必须</td>
                  <td>
                    接收用户号码，号码格式遵循国际电信联盟定义的E.164标准。即含国家码的手机号，例如：”ms”：”8613000110022”
                  </td>
                </tr>
                <tr>
                  <td>ts</td>
                  <td>发送消息的时间戳</td>
                  <td>20</td>
                  <td></td>
                  <td>
                    短信验证码发送事件发生的时间戳，“ts”:“ 20160713114223039684”
                  </td>
                </tr>
                <tr>
                  <td>vid</td>
                  <td>smsp平台生成的短信验证码id</td>
                  <td>16</td>
                  <td>必须</td>
                  <td>和2.3.2中的保持一致</td>
                </tr>
                <tr>
                  <td>vcode</td>
                  <td>短信校验码</td>
                  <td>6</td>
                  <td>必须</td>
                  <td>用户输入的短信校验码</td>
                </tr>
                <tr>
                  <td>sign</td>
                  <td>签名</td>
                  <td>32</td>
                  <td>必须</td>
                  <td>参考1.3</td>
                </tr>
                <tr>
                  <td>nonce</td>
                  <td>随机字符串</td>
                  <td>64</td>
                  <td></td>
                  <td></td>
                </tr>
              </table>
              <p>例子：</p>
              <pre>
                            {
                                "appkey": "jsyh",
                                "vid": "91", 
                                "vcode": "123456", 
                                "ms": "8613000110022", 
                                "sign": "C614B63D1B85FBC7C2A235183FD1D4C0", 
                                "ts": "20160713101356320"
                            }
                        </pre
              >
              <h4>3.4.1.响应消息</h4>
              <table class="table">
                <th>json键名</th>
                <th>内容</th>
                <th>最大长度</th>
                <th>说明</th>
                <tr>
                  <td>msg</td>
                  <td>String</td>
                  <td>128</td>
                  <td>返回结果的详细描述信息</td>
                </tr>
              </table>
              <p>例子：</p>
              <pre>
                            {
                            "msg": "success"
                            }
                        </pre
              >
            </div>
            <div id="smsInterface-Ordinary-SMS">
              <h3>4.普通短信</h3>
              <h4>4.1.功能</h4>
              <p>CP平台通过SMSP平台给用户发送短信。</p>
              <h4>4.2.请求方法</h4>
              <p>请设置成“POST”。</p>
              <h4>4.3.Url</h4>
              <p>http://{serverroot}/csms</p>
              <h4>4.4.请求消息</h4>
              <p>请求消息体中的参数（约定全部为小写字母）说明如下表所示</p>
              <h4>4.5.请求消息</h4>
              <table class="table">
                <th>json键名</th>
                <th>内容</th>
                <th>最大长度</th>
                <th>可选</th>
                <th>说明</th>
                <tr>
                  <td>appkey</td>
                  <td>应用标识</td>
                  <td>8</td>
                  <td>必须</td>
                  <td>应用商户的接入”appkey”:”jsyh”</td>
                </tr>
                <tr>
                  <td>tid</td>
                  <td>模板id</td>
                  <td>16</td>
                  <td>必须</td>
                  <td>模板id ”tid”:”1073001”</td>
                </tr>
                <tr>
                  <td>ms</td>
                  <td>手机号</td>
                  <td>15</td>
                  <td>必须</td>
                  <td>
                    接收用户号码，号码格式遵循国际电信联盟定义的E.164标准。即含国家码的手机号，例如：”ms”：”8613000110022”
                  </td>
                </tr>
                <tr>
                  <td>ts</td>
                  <td>发送消息的时间戳</td>
                  <td>20</td>
                  <td></td>
                  <td>
                    短信验证码发送事件发生的时间戳，“ts”:“ 20160713114223039684”
                  </td>
                </tr>
                <tr>
                  <td>ct</td>
                  <td>短信内容</td>
                  <td>1024</td>
                  <td>必须</td>
                  <td>用户短信内容</td>
                </tr>
                <tr>
                  <td>sign</td>
                  <td>签名</td>
                  <td>32</td>
                  <td>必须</td>
                  <td>参考1.3</td>
                </tr>
              </table>
              <p>例子：</p>
              <pre>
                            {
                                "appkey": "jsyh", 
                                ”tid”:”1073001”,
                                "ct": "91", 
                                "ms": "8613000110022", 
                                "sign": "7F33603C22C6DE56BF671C925918DCE8",
                                "ts": "20160713101356320"
                            }
                        </pre
              >
              <h4>4.6.响应消息</h4>
              <table class="table">
                <th>json键名</th>
                <th>内容</th>
                <th>最大长度</th>
                <th>说明</th>
                <tr>
                  <td>msg</td>
                  <td>String</td>
                  <td>128</td>
                  <td>返回结果的详细描述信息</td>
                </tr>
                <tr>
                  <td>msgid</td>
                  <td>string</td>
                  <td>26</td>
                  <td>消息id</td>
                </tr>
              </table>
              <p>例子：</p>
              <pre>
                            {
                            "msg": "success", 
                            "msgid": "16080512365800001521667374"
                            }
                        </pre
              >
            </div>
            <div id="smsInterface-Query-balance-interface">
              <h3>5.查询余额接口</h3>
              <h4>5.1.接口功能</h4>
              <p>CP平台用户查询余额，返回给CP平台一个剩余可用的短信条数。</p>
              <h4>5.2.请求方法</h4>
              <p>请设置成”GET”</p>
              <h4>5.3.Url</h4>
              <p>http://{serverroot}/qsms</p>
              <h4>5.4.请求消息</h4>
              <p>请求消息体中的参数（约定全部为小写字母）说明如下表所示。</p>
              <table class="table">
                <th>json键名</th>
                <th>内容</th>
                <th>最大长度</th>
                <th>可选</th>
                <th>说明</th>
                <tr>
                  <td>appkey</td>
                  <td>应用标识</td>
                  <td>8</td>
                  <td>必须</td>
                  <td>应用商户的接入”appkey”:”jsyh”</td>
                </tr>
                <tr>
                  <td>nonce</td>
                  <td>随机字符串</td>
                  <td>无限制</td>
                  <td>可选</td>
                  <td></td>
                </tr>
                <tr>
                  <td>ts</td>
                  <td>发送消息的时间戳</td>
                  <td>32</td>
                  <td></td>
                  <td>
                    短信验证码发送事件发生的时间戳，“ts”:“ 20160713114223039684”
                  </td>
                </tr>
                <tr>
                  <td>sign</td>
                  <td>签名</td>
                  <td>64</td>
                  <td>必须</td>
                  <td>参考1.3</td>
                </tr>
              </table>
              <p class="Remarks">注意：ms手机号目前只支持86中国手机号码</p>
              <p>请求消息示例如下：</p>
              <pre>
                            {
                                "appkey":"jsyh",
                                "ts":"20160713101356320",
                                "nonce":"900",
                                "sign":"1D731A07A180EC56C66451706FBE4AFF"
                            }
                        </pre
              >
              <h4>5.5.响应消息</h4>
              <table class="table">
                <th>json键名</th>
                <th>内容</th>
                <th>最大长度</th>
                <th>说明</th>
                <tr>
                  <td>balance</td>
                  <td>int</td>
                  <td>剩余可用的短信条数</td>
                </tr>
                <tr>
                  <td>msg String</td>
                  <td>128</td>
                  <td>返回结果的详细描述信息</td>
                </tr>
              </table>
              <p>响应消息示例：</p>
              <pre>
                            {
                            "balance": 198989, 
                            "msg": "success"
                            }
                        </pre
              >
            </div>
            <div id="smsInterface-SMS-status-report">
              <h3>6. 短信状态report</h3>
              <h4>6.1.接口功能</h4>
              <p>
                状态报告推送需要第三方客户提供一个HTTP的接收地址，短信平台为发送方，客户为接收方。
              </p>
              <h4>6.2.请求方法</h4>
              <p>请设置成”POST”</p>
              <h4>6.3.Url</h4>
              <p>第三方url:http://ip:port/接口名</p>
              <h4>6.4.推送消息</h4>
              <p>推送消息体中的参数（约定全部为小写字母）说明如下表所示。</p>
              <table class="table">
                <th>json键名</th>
                <th>内容</th>
                <th>最大长度</th>
                <th>可选</th>
                <th>说明</th>
                <tr>
                  <td>msgid</td>
                  <td>消息id</td>
                  <td>26</td>
                  <td>必须</td>
                  <td></td>
                </tr>
                <tr>
                  <td>ms</td>
                  <td>接收短信的手机号码</td>
                  <td>13</td>
                  <td>必须</td>
                  <td>加86</td>
                </tr>
                <tr>
                  <td>status</td>
                  <td>短消息的执行状态</td>
                  <td>1</td>
                  <td>必须</td>
                  <td>字符串 0：发送成功 1：等待发送 2：发送失败</td>
                </tr>
              </table>
              <h4>6.5.推送响应</h4>
              <p>推送响应参数（约定全部为小写字母）说明如下表所示。</p>
              <table class="table">
                <th>json键名</th>
                <th>内容</th>
                <th>最大长度</th>
                <th>可选</th>
                <th>说明</th>
                <tr>
                  <td>msgid</td>
                  <td>消息id</td>
                  <td>26</td>
                  <td>必须</td>
                  <td></td>
                </tr>
                <tr>
                  <td>status</td>
                  <td>短消息的执行状态</td>
                  <td>1</td>
                  <td>必须</td>
                  <td>字符串 0：接收成功 1：接收失败</td>
                </tr>
              </table>
            </div>
            <div id="smsInterface-SMS-status-query">
              <h3>7.短信状态查询</h3>
              <h4>7.1.接口功能</h4>
              <p>
                通过手机号码（ms）和消息ID（msgid），可以查询短信的发送结果（status）.
              </p>
              <h4>7.2. 请求方法</h4>
              <p>请设置成”get”.</p>
              <h4>7.3.Url</h4>
              <p>http ://{serverroot}/qsms</p>
              <h4>7.4.请求消息</h4>
              <p>请求消息体中的参数（约定全部为小写字母）说明如下表所示。</p>
              <table class="table">
                <th>json键名</th>
                <th>内容</th>
                <th>最大长度</th>
                <th>可选</th>
                <th>说明</th>
                <tr>
                  <td>appkey</td>
                  <td>应用标识</td>
                  <td>8</td>
                  <td>必须</td>
                  <td>应用商户的接入”appkey”:”jsyh”</td>
                </tr>
                <tr>
                  <td>nonce</td>
                  <td>随机字符串</td>
                  <td>无限制</td>
                  <td>可选</td>
                </tr>
                <tr>
                  <td>msgid</td>
                  <td>消息id</td>
                  <td>26</td>
                  <td>必须</td>
                </tr>
                <tr>
                  <td>ms</td>
                  <td>接收短信的手机号码</td>
                  <td>13</td>
                  <td>必须</td>
                  <td>加86</td>
                </tr>
                <tr>
                  <td>ts</td>
                  <td>发送消息的时间戳</td>
                  <td>32</td>
                  <td></td>
                  <td>
                    短信验证码发送事件发生的时间戳，“ts”:“ 20160713114223039684”
                  </td>
                </tr>
                <tr>
                  <td>sign</td>
                  <td>签名</td>
                  <td>64</td>
                  <td>必须</td>
                  <td>参考1.3</td>
                </tr>
              </table>
              <p>请求消息示例：</p>
              <pre>
                            {
                                'ms': '13810326774', 
                                'appkey': 'hwh', 
                                'nonce': 'Ck?VPQUA6S2OK*1B<>@(', 
                                'ts': '2016-08-09T07:14:16.325566+00:00', 
                                'msgid': '16080914251200001557305643', 
                                'sign': 'gxpbsBh0SoYIn/8ju9lm+3srO13iBg7Sodg6bg0/CbU='
                            }
                        </pre
              >
              <h4>7.5.响应消息</h4>
              <table class="table">
                <th>json键名</th>
                <th>内容</th>
                <th>最大长度</th>
                <th>说明</th>
                <td>status</td>
                <td>短信发送状态</td>
                <td>1</td>
                <td>"1"：成功 "2"：失败 "3"：无效请求</td>
              </table>
              <p>响应消息示例：</p>
              <pre>
                            {
                                "status":"1" 
                            }
                        </pre
              >
            </div>
            <div id="smsInterface-SMS-Deliver-push">
              <h3>8.短信Deliver推送</h3>
              <h4>8.1.接口功能</h4>
              <p>此接口用于向代理商通道号发送一条用户的上行请求。</p>
              <h4>8.2.请求方法</h4>
              <p>请设置成“post”</p>
              <h4>8.3.Url</h4>
              <p>http ://ip:port/deliver 需要代理商提供</p>
              <h4>8.4.推送deliver短信消息</h4>
              <p>请求消息体中的参数（约定全部为小写字母）说明如下表所示。</p>
              <table class="table">
                <th>json键名</th>
                <th>内容</th>
                <th>最大长度</th>
                <th>可选</th>
                <th>说明</th>
                <tr>
                  <td>ms</td>
                  <td>发送短消息的手机号</td>
                  <td>15</td>
                  <td>必须</td>
                  <td>
                    接收用户号码，号码格式遵循国际电信联盟定义的E.164标准。即含国家码的手机号，例如：”ms”：”8613000110022”
                  </td>
                </tr>
                <tr>
                  <td>spnum</td>
                  <td>sp接入号</td>
                  <td>20</td>
                  <td></td>
                  <td>“Spnum”:”10690001073”</td>
                </tr>
                <tr>
                  <td>ct</td>
                  <td>短信内容</td>
                  <td>6</td>
                  <td>必须</td>
                  <td>用户短信内容</td>
                </tr>
              </table>
              <p>注意：ms手机号目前只支持86中国手机号码</p>
              <p>推送息示例如下：</p>
              <pre>
                            {
                                "ms":"8613194072190",
                                "spnum":"10073",
                                "ct":"测试测试"
                            }
                        </pre
              >
              <h4>8.5.推送deliver响应</h4>
              <p>推送响应参数（约定全部为小写字母）说明如下表所示。</p>
              <table class="table">
                <th>json键名</th>
                <th>内容</th>
                <th>最大长度</th>
                <th>可选</th>
                <th>说明</th>
                <tr>
                  <td>msgid</td>
                  <td>消息id</td>
                  <td>26</td>
                  <td>必须</td>
                  <td>代理商自己生成</td>
                </tr>
                <tr>
                  <td>status</td>
                  <td>短消息的执行状态</td>
                  <td>1</td>
                  <td>必须</td>
                  <td>字符串0：接收成功 1：接收失败</td>
                </tr>
              </table>
              <p>响应消息实例如下：</p>
              <pre>
                            {
                            "msgid":"10006112161802260016888276",
                            "status":"0"
                            }
                        </pre
              >
            </div>
            <div id="smsInterface-appendix">
              <h3>9.附录</h3>
              <h4>9.1.发送短信java示例</h4>
              <pre>
                        private String getPostData(String mobile, String content, String tid) {
                            StringBuffer sb = new StringBuffer();
                            sb.append("appkey").append("=").append(appkey).append(",");
                            sb.append("ct").append("=").append(content).append(",");// 短信内容
                            sb.append("ms").append("=").append(mobile).append(",");// 手机号,含国家码
                            sb.append("tid").append("=").append(tid);
                    //      sb.append("ts").append("=").append(System.currentTimeMillis()).append(",");
                            sb.append(appsecret);
                            byte[] byteArray = Base64.encodeBase64(DigestUtils.sha256(sb.toString()));
                            String sign = new String(byteArray, Charsets.UTF_8);
                            JSONObject jo = new JSONObject();
                            jo.put("appkey", appkey);
                            jo.put("ct", content);
                            jo.put("tid", tid);
                            jo.put("ms", mobile);
                            jo.put("sign", sign);
                            return jo.toJSONString();
                        }
                        </pre
              >
            </div>
          </div>
          <!-- 短信接口说明_dom_结束 -->
          <!-- 短信验证接入说明_dom_开始 -->
          <div class="smsVerification-dom">
            <div id="smsVerification-Protocol-specification">
              <h3>使用说明</h3>
              <p>
                本文档提供了短信平台业务相关的API，提供接口的相关说明，以指导相关人员进行业务接入。
              </p>
              <p>
                号外号短信平台我们简称SMP(Short Message
                Platform)平台，前端客户我们简称CP（Customer Platform）。
              </p>
              <h3>1.接口简介</h3>
              <h4>1.1.协议说明</h4>
              <p>接口采用HTTP协议，发送响应的数据格式采用JSON格式。</p>
              <h4>1.2.通信模型</h4>
              <img
                src="../assets/images/smsVerification-Communication-model-diagram.png"
                alt="短信接口说明-通信模型图"
              />
              <h4>1.3 安全认证</h4>
              <p>采用数字签名模式进行报文传输</p>
              <p>生成数字签名算法如下：</p>
              <ol>
                <li>Ts参数使用utc标准时间, ISO8601格式.</li>
                <li>
                  请求报文各字段以参数名首字母为序（a-z）排列，参数名参数值以等号=连接，不同参数以逗号,连接。
                </li>
                <li>使用分配的appsecret追加到上面字段的尾部</li>
                <li>sign参数本身不参与签名</li>
                <li>使用SHA256算法生成签名</li>
                <li>使用base64算法转换签名</li>
              </ol>
              <p>说明：</p>
              <ol>
                <li>全部使用utf8编码解码</li>
                <li>Nonce为随机字符串，长度无限制</li>
              </ol>
              <p>实例：</p>
              <pre>
                            msg = { 
                                    'ms': '8613000110022', 
                                    'appkey': 'appkey', 
                                    'nonce': '?c3^4#5UT~s_HQ>eCzpU',
                                    'vp': '900',
                                    'ts': '2016-07-15T02:09:00.164515+00:00'
                                 }
                        </pre
              >
              <p>
                参与数字签名的字符串为, (appkey=appkey,
                appsecret=appid)：appkey=appkey,ms=8613000110022,
                nonce=?c3^4#5UT~s_HQeCzpU,ts=2016-07-15T02:09:00.164515+00:00,vp=900appid
              </p>
              <p>生成包含签名的最终报文如下：</p>
              <pre>
                            {
                                'sign': 'XFVI/aLjuWrFNxEENdPdoFeWipwgFBnz7TAu29yNEsA=',
                                'ms': '8613000110022', 
                                'appkey': 'appkey', 
                                'nonce': '?c3^4#5UT~s_HQ>eCzpU',
                                'vp': '900', 
                                'ts': '2016-07-15T02:09:00.164515+00:00'
                            }
                        </pre
              >
              <p>注：appkey 和appsecret 是由号外号短信平台统一分配的。</p>
              <h4>1.4. HTTP 状态码</h4>
              <p>POST 方法</p>
              <ol>
                <li>200 OK：成功。</li>
                <li>通用状态码</li>
                <li>500 SERVER ERROR：服务器内部错误。</li>
                <li>471: 无此appkey</li>
                <li>472: 缺少必要的键（字段）</li>
                <li>473: 数字签名校验失败</li>
                <li>474: 短信剩余条数不足</li>
                <li>475: 校验码超出有效期</li>
                <li>476: 校验码错误</li>
                <li>477: 消息格式错误</li>
                <li>478: 短信发送失败</li>
                <li>479: 推送信息失败</li>
              </ol>
            </div>
            <div id="smsVerification-SMS-verification-code-interface">
              <h3>2.获取短信验证码接口</h3>
              <h4>2.1.接口功能</h4>
              <p>
                当CP平台用户发送验证请求时，SMSP后台会向CP平台请求指定的手机号发送一个短信验证码，同时返回给CP平台一个短信验证码的id。
              </p>
              <h4>2.2.请求方法</h4>
              <p>请设置成”POST”</p>
              <h4>2.3.Url</h4>
              <p>http://{serverroot}/gsms</p>
              <h4>2.4.请求消息</h4>
              <p>请求消息体中的参数（约定全部为小写字母）说明如下表所示。</p>
              <p>表1-1请求消息体参数说明</p>
              <table class="table">
                <th>json键名</th>
                <th>内容</th>
                <th>最大长度</th>
                <th>可选</th>
                <th>说明</th>
                <tr>
                  <td>appkey</td>
                  <td>应用标识</td>
                  <td>8</td>
                  <td>必须</td>
                  <td>应用商户的接入”appkey”:”jsyh”</td>
                </tr>
                <tr>
                  <td>tid</td>
                  <td>模板id</td>
                  <td>16</td>
                  <td>必须</td>
                  <td>模板id ”tid”:”1073001”</td>
                </tr>
                <tr>
                  <td>ms</td>
                  <td>手机号</td>
                  <td>15</td>
                  <td>必须</td>
                  <td>
                    接收用户号码，号码格式遵循国际电信联盟定义的E.164标准。即含国家码的手机号，例如：”ms”：”8613000110022”
                  </td>
                </tr>
                <tr>
                  <td>ts</td>
                  <td>发送消息的时间戳</td>
                  <td>32</td>
                  <td></td>
                  <td>
                    短信验证码发送事件发生的时间戳，“ts”:“ 20160713114223039684”
                  </td>
                </tr>
                <tr>
                  <td>vp</td>
                  <td>短信验证码有效周期</td>
                  <td>32</td>
                  <td></td>
                  <td>
                    验证码有效期，在有效期内验证码有效，否则无效，用户重新发送请求验证码，单位秒。”vp”:”900”，默认60
                  </td>
                </tr>
                <tr>
                  <td>sign</td>
                  <td>签名</td>
                  <td>64</td>
                  <td>必须</td>
                  <td>参考1.3</td>
                </tr>
              </table>
              <p>注意：ms手机号目前只支持86中国手机号码</p>
              <p>请求消息示例如下：</p>
              <pre>
                            {
                                "appkey":"jsyh",
                                "tid": "1073001", 
                                "ms":"8613000110022",
                                "ts":"20160713101356320",
                                "vp":"900",
                                "sign":"1D731A07A180EC56C66451706FBE4AFF"
                            }
                        </pre
              >
              <h4>2.4.1.响应消息</h4>
              <p>表1-2响应消息参数说明</p>
              <table class="table">
                <th>json键名</th>
                <th>内容</th>
                <th>最大长度</th>
                <th>说明</th>
                <tr>
                  <td>vid</td>
                  <td>验证码ID，可选</td>
                  <td>16</td>
                  <td>短信验证码id，用于校验</td>
                </tr>
                <tr>
                  <td>msg</td>
                  <td>String</td>
                  <td>128</td>
                  <td>返回结果的详细描述信息</td>
                </tr>
                <tr>
                  <td>msgid</td>
                  <td>string</td>
                  <td>26</td>
                  <td>消息id</td>
                </tr>
              </table>
              <p>响应消息示例：</p>
              <pre>
                            {
                            "vid": "1", 
                            "msg": "success"，
                            "msgid":"16080512365800001521667374"
                            }
                        </pre
              >
            </div>
            <div id="smsVerification-check-SMS-verification-code-interface">
              <h3>3.校验短信验证码接口</h3>
              <h4>3.1.功能</h4>
              <p>
                当CP平台用户发送验证请求时，SMSP后台会向CP平台请求指定的手机号发送一个短信验证码，同时返回给CP平台一个短信验证码的id。CP平台使用此id校验CP平台用户的校验码是否正确。
              </p>
              <h4>3.2.请求方法</h4>
              <p>请设置成“POST”。</p>
              <h4>3.3.Url</h4>
              <p>http://{serverroot}/vsms</p>
              <h4>3.4.请求消息</h4>
              <p>请求消息体中的参数（约定全部为小写字母）说明如下表所示。</p>
              <table class="table">
                <th>json键名</th>
                <th>内容</th>
                <th>最大长度</th>
                <th>可选</th>
                <th>说明</th>
                <tr>
                  <td>appkey</td>
                  <td>应用标识</td>
                  <td>8</td>
                  <td>必须</td>
                  <td>应用商户的接入”appkey”:”jsyh”</td>
                </tr>
                <tr>
                  <td>ms</td>
                  <td>手机号</td>
                  <td>15</td>
                  <td>必须</td>
                  <td>
                    接收用户号码，号码格式遵循国际电信联盟定义的E.164
                    标准。即含国家码的手机号，例如：”ms”：”8613000110022”
                  </td>
                </tr>
                <tr>
                  <td>ts</td>
                  <td>发送消息的时间戳</td>
                  <td>20</td>
                  <td></td>
                  <td>
                    短信验证码发送事件发生的时间戳，“ts”:“ 20160713114223039684”
                  </td>
                </tr>
                <tr>
                  <td>vid</td>
                  <td>smsp平台生成的短信验证码id</td>
                  <td>16</td>
                  <td>必须</td>
                  <td>和2.3.2中的保持一致</td>
                </tr>
                <tr>
                  <td>vcode</td>
                  <td>短信校验码</td>
                  <td>6</td>
                  <td>必须</td>
                  <td>用户输入的短信校验码</td>
                </tr>
                <tr>
                  <td>sign</td>
                  <td>签名</td>
                  <td>32</td>
                  <td>必须</td>
                  <td>参考1.3</td>
                </tr>
                <tr>
                  <td>nonce</td>
                  <td>随机字符串</td>
                  <td>64</td>
                </tr>
              </table>
              <p>例子：</p>
              <pre>
                            {
                                "appkey": "jsyh",
                                "vid": "91", 
                                "vcode": "123456", 
                                "ms": "8613000110022", 
                                "sign": "C614B63D1B85FBC7C2A235183FD1D4C0", 
                                "ts": "20160713101356320"
                            }
                        </pre
              >
              <h4>3.4.1.响应消息</h4>
              <table class="table">
                <th>json键名</th>
                <th>内容</th>
                <th>最大长度</th>
                <th>说明</th>
                <tr>
                  <td>msg</td>
                  <td>String</td>
                  <td>128</td>
                  <td>返回结果的详细描述信息</td>
                </tr>
              </table>
              <p>例子：</p>
              <pre>
                            {
                            "msg": "success"
                            }
                        </pre
              >
            </div>
            <div id="smsVerification-Ordinary-SMS">
              <h3>4.普通短信</h3>
              <h4>4.1.功能</h4>
              <p>CP平台通过SMSP平台给用户发送短信。</p>
              <h4>4.2.请求方法</h4>
              <p>请设置成“POST”。</p>
              <h4>4.3.Url</h4>
              <p>http: //{serverroot}/csms</p>
              <h4>4.4.请求消息</h4>
              <p>请求消息体中的参数（约定全部为小写字母）说明如下表所示</p>
              <h4>4.5.请求消息</h4>
              <table class="table">
                <tr>
                  <th>json键名</th>
                  <th>内容</th>
                  <th>最大长度</th>
                  <th>可选</th>
                  <th>说明</th>
                </tr>
                <tr>
                  <td>appkey</td>
                  <td>应用标识</td>
                  <td>8</td>
                  <td>必须</td>
                  <td>应用商户的接入”appkey” :”jsyh”</td>
                </tr>

                <tr>
                  <td>tid</td>
                  <td>模板id</td>
                  <td>16</td>
                  <td>必须</td>
                  <td>模板id ”tid”:”1073001”</td>
                </tr>
                <tr>
                  <td>ms</td>
                  <td>手机号</td>
                  <td>15</td>
                  <td>必须</td>
                  <td>
                    接收用户号码，号码格式遵循国际电信联盟定义的E.164标准。即含国家码的手机号，例如：”ms”：”8613000110022”
                  </td>
                </tr>
                <tr>
                  <td>ts</td>
                  <td>发送消息的时间戳</td>
                  <td>20</td>
                  <td>
                    短信验证码发送事件发生的时间戳，“ts”:“ 20160713114223039684”
                  </td>
                </tr>
                <tr>
                  <td>ct</td>
                  <td>短信内容</td>
                  <td>1024</td>
                  <td>必须</td>
                  <td>用户短信内容</td>
                </tr>
                <tr>
                  <td>sign</td>
                  <td>签名</td>
                  <td>32</td>
                  必须
                  <td>参考1.3</td>
                </tr>
              </table>
              <p>例子：</p>
              <pre>
                            {
                                "appkey": "jsyh", 
                                ”tid”:”1073001”,
                                "ct": "91", 
                                "ms": "8613000110022", 
                                "sign": "7F33603C22C6DE56BF671C925918DCE8",
                                "ts": "20160713101356320"
                            }
                        </pre
              >
              <h4>4.6.响应消息</h4>
              <table class="table">
                <th>json键名</th>
                <th>内容</th>
                <th>最大长度</th>
                <th>说明</th>
                <tr>
                  <td>msg</td>
                  <td>String</td>
                  <td>128</td>
                  <td>返回结果的详细描述信息</td>
                </tr>
                <tr>
                  <td>msgid</td>
                  <td>string</td>
                  <td>26</td>
                  <td>消息id</td>
                </tr>
              </table>
              <p>例子：</p>
              <pre>
                            {
                            "msg": "success", 
                            "msgid": "16080512365800001521667374"
                            }
                        </pre
              >
            </div>
            <div id="smsVerification-Query-balance-interface">
              <h3>5. 查询余额接口</h3>
              <h4>5.1.接口功能</h4>
              <p>CP平台用户查询余额，返回给CP平台一个剩余可用的短信条数。</p>
              <h4>5.2.请求方法</h4>
              <p>请设置成”GET”</p>
              <h4>5.3.Url</h4>
              <p>http://{serverroot}/qsms</p>
              <h4>5.4.请求消息</h4>
              <p>请求消息体中的参数（约定全部为小写字母）说明如下表所示。</p>
              <table class="table">
                <th>json键名</th>
                <th>内容</th>
                <th>最大长度</th>
                <th>可选</th>
                <th>说明</th>
                <tr>
                  <td>appkey</td>
                  <td>应用标识</td>
                  <td>8</td>
                  <td>必须</td>
                  <td>应用商户的接入”appkey”:”jsyh”</td>
                </tr>
                <tr>
                  <td>nonce</td>
                  <td>随机字符串</td>
                  <td>无限制</td>
                  <td>可选</td>
                </tr>
                <tr>
                  <td>ts</td>
                  <td>发送消息的时间戳</td>
                  <td>32</td>
                  <td></td>
                  <td>
                    短信验证码发送事件发生的时间戳，“ts”:“ 20160713114223039684”
                  </td>
                </tr>
                <tr>
                  <td>sign</td>
                  <td>签名</td>
                  <td>64</td>
                  <td>必须</td>
                  <td>参考1.3</td>
                </tr>
              </table>
              <p>注意：ms手机号目前只支持86中国手机号码</p>
              <p>请求消息示例如下：</p>
              <pre>
                            {
                                "appkey":"jsyh",
                                "ts":"20160713101356320",
                                "nonce":"900",
                                "sign":"1D731A07A180EC56C66451706FBE4AFF"
                            }
                        </pre
              >
              <h4>5.5.响应消息</h4>
              <table class="table">
                <th>json键名</th>
                <th>内容</th>
                <th>最大长度</th>
                <th>说明</th>
                <tr>
                  <td>balance</td>
                  <td>int</td>
                  <td></td>
                  <td>剩余可用的短信条数</td>
                </tr>
                <tr>
                  <td>msg</td>
                  <td>String</td>
                  <td>128</td>
                  <td>返回结果的详细描述信息</td>
                </tr>
              </table>
              <p>响应消息示例：</p>
              <pre>
                            {
                            "balance": 198989, 
                            "msg": "success"
                            }
                        </pre
              >
            </div>
            <div id="smsVerification-SMS-status-report">
              <h3>6. 短信状态report</h3>
              <h4>6.1.接口功能</h4>
              <p>
                状态报告推送需要第三方客户提供一个HTTP的接收地址，短信平台为发送方，客户为接收方。
              </p>
              <h4>6.2.请求方法</h4>
              <p>请设置成”POST”</p>
              <h4>6.3.Url</h4>
              <p>第三方url:http://ip:port/接口名</p>
              <h4>6.4.推送消息</h4>
              <p>推送消息体中的参数（约定全部为小写字母）说明如下表所示。</p>
              <table class="table">
                <th>json键名</th>
                <th>内容</th>
                <th>最大长度</th>
                <th>可选</th>
                <th>说明</th>
                <tr>
                  <td>msgid</td>
                  <td>消息id</td>
                  <td>26</td>
                  <td>必须</td>
                </tr>
                <tr>
                  <td>ms</td>
                  <td>接收短信的手机号码</td>
                  <td>13</td>
                  <td>必须</td>
                  <td>加86</td>
                </tr>
                <tr>
                  <td>status</td>
                  <td>短消息的执行状态</td>
                  <td>1</td>
                  <td>必须</td>
                  <td>字符串0：发送成功 1：等待发送 2：发送失败</td>
                </tr>
              </table>
              <h4>6.5. 推送响应</h4>
              <p>推送响应参数（约定全部为小写字母）说明如下表所示。</p>
              <table class="table">
                <th>json键名</th>
                <th>内容</th>
                <th>最大长度</th>
                <th>可选</th>
                <th>说明</th>
                <tr>
                  <td>msgid</td>
                  <td>消息id</td>
                  <td>26</td>
                  <td>必须</td>
                </tr>
                <tr>
                  <td>status</td>
                  <td>短消息的执行状态</td>
                  <td>1</td>
                  <td>必须</td>
                  <td>字符串 0：接收成功 1：接收失败</td>
                </tr>
              </table>
            </div>
            <div id="smsVerification-SMS-status-query">
              <h3>7. 短信状态查询</h3>
              <h4>7.1. 接口功能</h4>
              <p>
                通过手机号码（ms）和消息ID（msgid），可以查询短信的发送结果（status）.
              </p>
              <h4>7.2. 请求方法</h4>
              <p>请设置成”get”.</p>
              <h4>7.3. Url</h4>
              <p>http://{serverroot}/qsms</p>
              <h4>7.4. 请求消息</h4>
              <p>请求消息体中的参数（约定全部为小写字母）说明如下表所示。</p>
              <table class="table">
                <tr>
                  <th>json键名</th>
                  <th>内容</th>
                  <th>最大长度</th>
                  <th>可选</th>
                  <th>说明</th>
                </tr>
                <tr>
                  <td>appkey</td>
                  <td>应用标识</td>
                  <td>8</td>
                  <td>必须</td>
                  <td>应用商户的接入”appkey”:”jsyh”</td>
                </tr>
                <tr>
                  <td>nonce</td>
                  <td>随机字符串</td>
                  <td>无限制</td>
                  <td>可选</td>
                </tr>
                <tr>
                  <td>msgid</td>
                  <td>消息id</td>
                  <td>26</td>
                  <td>必须</td>
                </tr>
                <tr>
                  <td>ms</td>
                  <td>接收短信的手机号码</td>
                  <td>13</td>
                  <td>必须</td>
                  <td>加86</td>
                </tr>
                <tr>
                  <td>ts</td>
                  <td>发送消息的时间戳</td>
                  <td>32</td>
                  <td>
                    短信验证码发送事件发生的时间戳，“ts”:“ 20160713114223039684”
                  </td>
                </tr>
                <tr>
                  <td>sign</td>
                  <td>签名</td>
                  <td>64</td>
                  <td>必须</td>
                  <td>参考1.3</td>
                </tr>
              </table>
              <p>请求消息示例：</p>
              <pre>
                            {
                                'ms': '13810326774', 
                                'appkey': 'hwh', 
                                'nonce': 'Ck?VPQUA6S2OK*1B<>@(', 
                                'ts': '2016-08-09T07:14:16.325566+00:00', 
                                'msgid': '16080914251200001557305643', 
                                'sign': 'gxpbsBh0SoYIn/8ju9lm+3srO13iBg7Sodg6bg0/CbU='
                            }
                        </pre
              >
              <h4>7.5.响应消息</h4>
              <table class="table">
                <th>json键名</th>
                <th>内容</th>
                <th>最大长度</th>
                <th>说明</th>
                <tr>
                  <td>status</td>
                  <td>短信发送状态</td>
                  <td>1</td>
                  <td>"1": 成功 "2"：失败 "3"：无效请求</td>
                </tr>
              </table>
              <p>响应消息示例：</p>
              <pre>
                            {
                            "status":"1" 
                            }
                        </pre
              >
            </div>
            <div id="smsVerification-SMS-Deliver-push">
              <h3>8. 短信Deliver推送</h3>
              <h4>8.1.接口功能</h4>
              <p>此接口用于向代理商通道号发送一条用户的上行请求。</p>
              <h4>8.2.请求方法</h4>
              <p>请设置成“post”</p>
              <h4>8.3.Url</h4>
              <p>http://ip:port/deliver 需要代理商提供</p>
              <h4>8.4.推送deliver短信消息</h4>
              <p>请求消息体中的参数（约定全部为小写字母）说明如下表所示。</p>
              <table class="table">
                <th>json键名</th>
                <th>内容</th>
                <th>最大长度</th>
                <th>可选</th>
                <th>说明</th>
                <tr>
                  <td>ms</td>
                  <td>发送短消息的手机号</td>
                  <td>15</td>
                  <td>必须</td>
                </tr>
                <tr>
                  <td>spnum</td>
                  <td>sp接入号</td>
                  <td>20</td>
                  <td>“Spnum”:”10690001073”</td>
                </tr>
                <tr>
                  <td>ct</td>
                  <td>短信内容</td>
                  <td>6</td>
                  <td>必须</td>
                  <td>用户短信内容</td>
                </tr>
              </table>
              <p>注意：ms手机号目前只支持86中国手机号码</p>
              <p>推送息示例如下：</p>
              <pre>
                            {
                            "ms":"8613194072190",
                            "spnum":"10073",
                            "ct":"测试测试"
                            }
                        </pre
              >
              <h4>8.5.推送deliver响应</h4>
              <p>推送响应参数（约定全部为小写字母）说明如下表所示。</p>
              <table class="table">
                <tr>
                  <td>json键名</td>
                  <td>内容</td>
                  <td>最大长度</td>
                  <td>可选</td>
                  <td>说明</td>
                </tr>
                <tr>
                  <td>msgid</td>
                  <td>消息id</td>
                  <td>26</td>
                  <td>必须</td>
                  <td>代理商自己生成</td>
                </tr>
                <tr>
                  <td>status</td>
                  <td>短消息的执行状态</td>
                  <td>1</td>
                  <td>必须</td>
                  <td>字符串 0：接收成功 1：接收失败</td>
                </tr>
              </table>
              <p>响应消息实例如下：</p>
              <pre>
                            {
                                "msgid":"10006112161802260016888276",
                                "status":"0"
                            }
                        </pre
              >
            </div>
            <div id="smsVerification-appendix">
              <h3>9.附录</h3>
              <h4>9.1.发送短信java示例</h4>
              <pre>
                            private String getPostData(String mobile, String content, String tid) {
                            StringBuffer sb = new StringBuffer();
                            sb.append("appkey").append("=").append(appkey).append(",");
                            sb.append("ct").append("=").append(content).append(",");// 短信内容
                            sb.append("ms").append("=").append(mobile).append(",");// 手机号,含国家码
                            sb.append("tid").append("=").append(tid);
                    //      sb.append("ts").append("=").append(System.currentTimeMillis()).append(",");
                            sb.append(appsecret);
                            byte[] byteArray = Base64.encodeBase64(DigestUtils.sha256(sb.toString()));
                            String sign = new String(byteArray, Charsets.UTF_8);
                            JSONObject jo = new JSONObject();
                            jo.put("appkey", appkey);
                            jo.put("ct", content);
                            jo.put("tid", tid);
                            jo.put("ms", mobile);
                            jo.put("sign", sign);
                            return jo.toJSONString();
                            }
                        </pre
              >
            </div>
          </div>
          <!-- 短信验证接入说明_dom_结束 -->
        </div>
      </section>
    </section>
  </body>
  <script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="../assets/js/down-menu.js"></script>
  <script>
    $(function () {
      /*
       * 页面加载后的默认状态！
       */
      $(".api-items div:first").fadeIn();
      $(".API-content .ACI-dom #ACI-communication-model").fadeIn();
      // 给横向导航第一个添加默认选中
      $('.api-title-line [name="#ACI"]').addClass("active");
      // 给左侧导航第一个添加默认选中
      $(".api-items div ol li a:first").addClass("active");

      /*
       * 点击头部导航列表！
       * 1. 先将左侧列表全部隐藏
       * 2. 将右侧内容区域全部隐藏
       * 3. 默认选中左侧列表的第一个。
       * 4. each内判断点击那个给那个加选中状态
       * 5. 如果选中状态存在就将其删除
       * 6. 如果选中状态不存在就添加选中状态
       * 7. 控制左侧列表显示
       * 8. 控制右侧内容显示
       */
      $(".api-title-line ul li a").click(function () {
        $(".api-left .api-items div").hide();
        $(".api-right .API-content div div").hide();
        $("" + $($(this)).attr("name") + " ol li a:first").addClass("active");

        var me = $(this);
        // 点击后选中样式
        $(".api-title-line ul li a").each(function () {
          if ($(this).hasClass("active")) {
            $(this).removeClass("active");
          } else {
            me.addClass("active");
          }
        });

        $("" + $($(this)).attr("name") + "").fadeIn();
        $("" + $($(this)).data("id") + "").fadeIn();
      });

      /*
       * 左侧列表点击逻辑！
       */
      $("ul.api-items div ol li a").click(function () {
        $(".API-content div[class$=dom] div").hide();

        me = $(this);
        // 点击后选中样式
        $("ul.api-items div ol li a").each(function () {
          if ($(this).hasClass("active")) {
            $(this).removeClass("active");
          } else {
            me.addClass("active");
          }
        });
        // 控制左侧列表显示
        me.each(function () {
          $("" + $($($(this))[0]).attr("name") + "").fadeIn();
        });
      });
    });
  </script>
</html>
